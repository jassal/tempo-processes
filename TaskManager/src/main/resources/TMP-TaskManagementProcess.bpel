<?xml version="1.0" encoding="UTF-8"?>
<bpel:process xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:pnlk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ode="http://www.apache.org/ode/type/extension" xmlns:AdhocTaskManagement1="http://www.apache.org/ode/pmapi" xmlns:AdhocTaskManagement="http://bpms.everteam.com/TMP/AdhocTaskManagement" xmlns:tns="http://www.intalio.com/BPMS/Workflow/TaskManagementServices-20051109/" xmlns:diag="http://bpms.everteam.com/TMP" xmlns:TaskManagementProcessimplicitPartner="http://bpms.everteam.com/TMP/TaskManagementProcessimplicitPartner" xmlns:pmapi="http://www.apache.org/ode/pmapi/types/2006/08/02/" xmlns:b4px="java:org.intalio.tempo.workflow.processes.xpath.UID" xmlns:UIFW="http://bpms.everteam.com/TMP/UIFW" xmlns:TaskManagementSystem="http://bpms.everteam.com/TMP/TaskManagementSystem" xmlns:PreviousProcessTaskManager="http://bpms.everteam.com/TMP/PreviousProcessTaskManager" xmlns:UserBusinessProcess1="http://www.intalio.com/bpms/ubp" xmlns:b4p="http://www.intalio.com/bpms/workflow/ib4p_20051115" xmlns:this="http://example.com/TMP/TaskManagementProcess" xmlns:UserBusinessProcess="http://bpms.everteam.com/TMP/UserBusinessProcess" xmlns:NextTaskManager="http://bpms.everteam.com/TMP/NextTaskManager" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:bpmn="http://www.intalio.com/bpms" xmlns:atomic="http://ode.apache.org/atomicScope" queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" bpmn:label="TaskManagementProcess" name="TaskManagementProcess" bpmn:id="_opUVQKdvEdyId4P63ChZuw" targetNamespace="http://example.com/TMP/TaskManagementProcess">
  <bpel:import namespace="http://example.com/TMP/TaskManagementProcess" location="TMP-TaskManagementProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://bpms.everteam.com/TMP" location="TMP.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.apache.org/ode/pmapi" location="AdhocTaskManagement.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/BPMS/Workflow/TaskManagementServices-20051109/" location="TaskManagementSystem.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/bpms/ubp" location="UserBusinessProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/bpms/workflow/ib4p_20051115" location="TaskManagerProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.intalio.com/bpms/workflow/ib4p_20051115" location="b4p.xsd" importType="http://www.w3.org/2001/XMLSchema"></bpel:import>
  <bpel:partnerLinks>
    <bpel:partnerLink name="tMPAndUBPPlkVar" partnerLinkType="diag:TMPAndUBP" initializePartnerRole="yes" myRole="TaskManagementProcess_for_UserBusinessProcessForUserBusinessProcessPort" partnerRole="UserBusinessProcess_for_TaskManagementProcessForUserProcessPort"/>
    <bpel:partnerLink name="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlk" initializePartnerRole="yes" partnerRole="AdhocTaskManagement_for_TaskManagementProcess"/>
    <bpel:partnerLink name="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" partnerLinkType="diag:TaskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlk" initializePartnerRole="yes" partnerRole="TaskManagementSystem_for_TaskManagementProcess"/>
    <bpel:partnerLink name="taskManagementProcessAndPreviousProcessTaskManagerForTMPPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndPreviousProcessTaskManagerForTMPPortPlk" initializePartnerRole="yes" partnerRole="PreviousProcessTaskManager_for_TaskManagementProcess"/>
    <bpel:partnerLink name="taskManagementProcessAndUIFWForUIFWPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndUIFWForUIFWPortPlk" myRole="TaskManagementProcess_for_UIFW"/>
    <bpel:partnerLink name="taskManagementProcessimplicitPartnerAndTaskManagementProcessForTMPPortPlkVar" partnerLinkType="diag:TaskManagementProcessimplicitPartnerAndTaskManagementProcessForTMPPortPlk" initializePartnerRole="yes" myRole="TaskManagementProcess_for_TaskManagementProcessimplicitPartner" partnerRole="TaskManagementProcessimplicitPartner_for_TaskManagementProcess"/>
    <bpel:partnerLink name="taskManagementProcessAndNextTaskManagerForTMPPortPlkVar" partnerLinkType="diag:TaskManagementProcessAndNextTaskManagerForTMPPortPlk" myRole="TaskManagementProcess_for_NextTaskManager"/>
  </bpel:partnerLinks>
  <bpel:correlationSets>
    <bpel:correlationSet name="task" properties="this:taskId"/>
  </bpel:correlationSets>
  <bpel:variables>
    <bpel:variable name="createTMSTaskRequest" messageType="tns:createRequest"/>
    <bpel:variable name="createTMSTaskResponse" messageType="tns:okResponse"/>
    <bpel:variable name="taskCompleted" type="xs:boolean"/>
    <bpel:variable name="taskClaimed" type="xs:boolean"/>
    <bpel:variable name="taskEscalated" type="xs:boolean"/>
    <bpel:variable name="createTaskRequest" messageType="b4p:createTaskRequest"/>
    <bpel:variable name="createTaskResponse" messageType="b4p:createTaskResponse"/>
    <bpel:variable name="initialOwners" type="tns:owners"/>
    <bpel:variable name="NextTaskReady" messageType="b4p:nextTaskReady"/>
    <bpel:variable name="taskId" type="xs:string"/>
    <bpel:variable name="isSingleActivit" type="xs:boolean"/>
    <bpel:variable name="CreateTaskSingleActivityRequest" messageType="b4p:createTaskSingleActivityRequest"/>
    <bpel:variable name="CreateTaskSingleActivityResponse" messageType="b4p:createTaskSingleActivityResponse"/>
    <bpel:variable name="adhocDataVar" type="b4p:adhocDataVar"/>
    <bpel:variable name="responseSent" type="xs:boolean"/>
    <bpel:variable name="LinkTaskWithUBPRequest" messageType="AdhocTaskManagement1:linkPATaskWithUBPInfoInput"/>
    <bpel:variable name="LinkTaskWithUBPResponse" messageType="AdhocTaskManagement1:linkPATaskWithUBPInfoOutput"/>
    <bpel:variable name="GetTaskInfoRequest" messageType="AdhocTaskManagement1:getUBPInfoForPATaskInput"/>
    <bpel:variable name="GetTaskInfoResponse" messageType="AdhocTaskManagement1:getUBPInfoForPATaskOutput"/>
    <bpel:variable name="AddAdhocTaskRequestVarToUBPRequest" messageType="AdhocTaskManagement1:addAdhocTaskVariableToUBPInput"/>
    <bpel:variable name="AddAdhocTaskRequestVarToUBPResponse" messageType="AdhocTaskManagement1:addAdhocTaskVariableToUBPOutput"/>
    <bpel:variable name="AddAdhocTaskResponseVarToUBPRequest" messageType="AdhocTaskManagement1:addAdhocTaskVariableToUBPInput"/>
    <bpel:variable name="AddAdhocTaskResponseVarToUBPResponse" messageType="AdhocTaskManagement1:addAdhocTaskVariableToUBPOutput"/>
    <bpel:variable name="SendAdhocTaskEventToUBPRequest" messageType="AdhocTaskManagement1:sendAdhocTaskEventToUBPInput"/>
    <bpel:variable name="SendAdhocTaskEventToUBPResponse" messageType="AdhocTaskManagement1:sendAdhocTaskEventToUBPOutput"/>
	<bpel:variable name="LinkAdhocTaskWithUBPRequest" messageType="AdhocTaskManagement1:linkPATaskWithUBPInfoInput"/>
	<bpel:variable name="LinkAdhocTaskWithUBPResponse" messageType="AdhocTaskManagement1:linkPATaskWithUBPInfoOutput"/>
  </bpel:variables>
  <bpel:sequence>
    <bpel:pick createInstance="yes" bpmn:label="Exclusive_Event-Based_Gateway" name="Exclusive_Event-Based_Gateway" bpmn:id="_x9SrsOXQEeWG7YrGV-y1wQ">
      <bpel:onMessage partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="createTask" variable="createTaskRequest" bpmn:label="Create Task" name="Create_Task" bpmn:id="_kh8I0KdyEdyId4P63ChZuw">
        <bpel:sequence>
          <bpel:assign name="init-variables-TaskManagementProcess" bpmn:id="_opUVQKdvEdyId4P63ChZuw">
            <bpel:copy bpmn:label="$createTMSTaskRequest">
              <bpel:from>
                <bpel:literal><tns:createRequest>
    <tns:task>
        <tns:metadata>
            <tns:taskId></tns:taskId>
            <tns:taskState></tns:taskState>
            <tns:taskType></tns:taskType>
            <tns:description></tns:description>
            <tns:processId></tns:processId>
            <tns:instanceId></tns:instanceId>
            <tns:creationDate></tns:creationDate>
            <tns:userOwner></tns:userOwner>
            <tns:roleOwner></tns:roleOwner>
            <tns:deadline></tns:deadline>
            <tns:priority></tns:priority>
            <tns:claimAction></tns:claimAction>
            <tns:revokeAction></tns:revokeAction>
            <tns:saveAction></tns:saveAction>
            <tns:completeAction></tns:completeAction>
            <tns:formUrl></tns:formUrl>
            <tns:userProcessCompleteSOAPAction></tns:userProcessCompleteSOAPAction>
            <tns:userProcessEndpoint></tns:userProcessEndpoint>
            <tns:userProcessNamespaceURI></tns:userProcessNamespaceURI>
            <tns:attachments></tns:attachments>
            <tns:globalAttachments></tns:globalAttachments>
            <tns:isAdhocTask></tns:isAdhocTask>
            <tns:allowAdhocTask></tns:allowAdhocTask>
            <tns:adhocIndex></tns:adhocIndex>
            <tns:associatedTaskID></tns:associatedTaskID>
            <tns:adhocformType></tns:adhocformType>
            <tns:adhocPlacement></tns:adhocPlacement>
            <tns:adhocNote></tns:adhocNote>
        </tns:metadata>
        <tns:input/>
    </tns:task>
    <tns:participantToken></tns:participantToken>
</tns:createRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskCompleted">
              <bpel:from>
                <bpel:literal>false</bpel:literal>
              </bpel:from>
              <bpel:to>$taskCompleted</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskClaimed">
              <bpel:from>
                <bpel:literal>false</bpel:literal>
              </bpel:from>
              <bpel:to>$taskClaimed</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskEscalated">
              <bpel:from>
                <bpel:literal>false</bpel:literal>
              </bpel:from>
              <bpel:to>$taskEscalated</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$createTaskResponse">
              <bpel:from>
                <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:instanceId></b4p:instanceId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:dismissAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:dismissAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
        <b4p:globalAttachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:globalAttachments>
    </b4p:taskMetaData>
    <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
              </bpel:from>
              <bpel:to>$createTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$initialOwners">
              <bpel:from>
                <bpel:literal>
<typeWrapper>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
</typeWrapper></bpel:literal>
              </bpel:from>
              <bpel:to>$initialOwners</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$NextTaskReady">
              <bpel:from>
                <bpel:literal>
<b4p:chainedExecution>
  <b4p:previousTaskId></b4p:previousTaskId>
  <b4p:nextTaskId></b4p:nextTaskId>
  <b4p:nextTaskURL></b4p:nextTaskURL>
</b4p:chainedExecution></bpel:literal>
              </bpel:from>
              <bpel:to>$NextTaskReady.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskId">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$taskId</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$isSingleActivit">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$isSingleActivit</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$CreateTaskSingleActivityResponse">
              <bpel:from>
                <bpel:literal>
<b4p:createTaskSingleActivityResponse>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:taskOutput></b4p:taskOutput>
  <b4p:user></b4p:user>
  <b4p:status></b4p:status>
  <b4p:participantToken></b4p:participantToken>
</b4p:createTaskSingleActivityResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$CreateTaskSingleActivityResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$adhocDataVar">
              <bpel:from>
                <bpel:literal>
<typeWrapper>
  <b4p:isAdhocTask></b4p:isAdhocTask>
  <b4p:associatedTaskID></b4p:associatedTaskID>
  <b4p:adhocPlacement></b4p:adhocPlacement>
</typeWrapper></bpel:literal>
              </bpel:from>
              <bpel:to>$adhocDataVar</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$responseSent">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$responseSent</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$LinkTaskWithUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:linkPATaskWithUBPInfo>
  <taskId></taskId>
  <ubpInstanceId></ubpInstanceId>
  <tmpInstanceId></tmpInstanceId>
  <activityInfo></activityInfo>
  <taskRequestVar></taskRequestVar>
  <taskResponseVar></taskResponseVar>
</AdhocTaskManagement1:linkPATaskWithUBPInfo></bpel:literal>
              </bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$GetTaskInfoRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:getUBPInfoForPATask>
  <taskId></taskId>
</AdhocTaskManagement1:getUBPInfoForPATask></bpel:literal>
              </bpel:from>
              <bpel:to>$GetTaskInfoRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$AddAdhocTaskRequestVarToUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:addAdhocTaskVariableToUBP>
  <instanceId></instanceId>
  <variableName></variableName>
  <variableValue></variableValue>
</AdhocTaskManagement1:addAdhocTaskVariableToUBP></bpel:literal>
              </bpel:from>
              <bpel:to>$AddAdhocTaskRequestVarToUBPRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$AddAdhocTaskResponseVarToUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:addAdhocTaskVariableToUBP>
  <instanceId></instanceId>
  <variableName></variableName>
  <variableValue></variableValue>
</AdhocTaskManagement1:addAdhocTaskVariableToUBP></bpel:literal>
              </bpel:from>
              <bpel:to>$AddAdhocTaskResponseVarToUBPRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$SendAdhocTaskEventToUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:sendAdhocTaskEventToUBP>
  <adhocTaskEventDetails></adhocTaskEventDetails>
  <instanceId></instanceId>
  <adhocTaskId></adhocTaskId>
  <parentTaskId></parentTaskId>
</AdhocTaskManagement1:sendAdhocTaskEventToUBP></bpel:literal>
              </bpel:from>
              <bpel:to>$SendAdhocTaskEventToUBPRequest.parameters</bpel:to>
            </bpel:copy>
			<bpel:copy bpmn:label="$LinkAdhocTaskWithUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:linkPATaskWithUBPInfo>
  <taskId></taskId>
  <ubpInstanceId></ubpInstanceId>
  <tmpInstanceId></tmpInstanceId>
  <activityInfo></activityInfo>
  <taskRequestVar></taskRequestVar>
  <taskResponseVar></taskResponseVar>
</AdhocTaskManagement1:linkPATaskWithUBPInfo></bpel:literal>
              </bpel:from>
              <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:assign bpmn:label="Create Task" name="Create_Task-1" bpmn:id="_kh8I0KdyEdyId4P63ChZuw">
            <bpel:copy>
              <bpel:from>concat(b4px:create(), $ode:pid)</bpel:from>
              <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
              <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:formUrl</bpel:to>
            </bpel:copy>
            <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
              <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:processId</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>if (boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until))) then ($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until) else (if (boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) then ((current-dateTime() + xs:yearMonthDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) + xs:dayTimeDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) else (current-dateTime()))</bpel:from>
              <bpel:to>$createTaskResponse.root/b4p:taskMetaData/b4p:creationDate</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:reply partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="createTask" variable="createTaskResponse" bpmn:label="Create Task" name="Create_Task-2" bpmn:id="_kh8I0KdyEdyId4P63ChZuw">
            <bpel:correlations>
              <bpel:correlation set="task" initiate="yes"/>
            </bpel:correlations>
          </bpel:reply>
        </bpel:sequence>
      </bpel:onMessage>
      <bpel:onMessage partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="createTaskSingleActivity" variable="CreateTaskSingleActivityRequest" bpmn:label="Create Task Single&#13;&#10;Activity" name="Create_Task_Single__Activity" bpmn:id="_4YwTQOXQEeWG7YrGV-y1wQ">
        <bpel:sequence>
          <bpel:assign name="init-variables-TaskManagementProcess" bpmn:id="_opUVQKdvEdyId4P63ChZuw">
            <bpel:copy bpmn:label="$createTMSTaskRequest">
              <bpel:from>
                <bpel:literal><tns:createRequest>
    <tns:task>
        <tns:metadata>
            <tns:taskId></tns:taskId>
            <tns:taskState></tns:taskState>
            <tns:taskType></tns:taskType>
            <tns:description></tns:description>
            <tns:processId></tns:processId>
            <tns:instanceId></tns:instanceId>
            <tns:creationDate></tns:creationDate>
            <tns:userOwner></tns:userOwner>
            <tns:roleOwner></tns:roleOwner>
            <tns:deadline></tns:deadline>
            <tns:priority></tns:priority>
            <tns:claimAction></tns:claimAction>
            <tns:revokeAction></tns:revokeAction>
            <tns:saveAction></tns:saveAction>
            <tns:completeAction></tns:completeAction>
            <tns:formUrl></tns:formUrl>
            <tns:userProcessCompleteSOAPAction></tns:userProcessCompleteSOAPAction>
            <tns:userProcessEndpoint></tns:userProcessEndpoint>
            <tns:userProcessNamespaceURI></tns:userProcessNamespaceURI>
            <tns:attachments></tns:attachments>
            <tns:globalAttachments></tns:globalAttachments>
            <tns:isAdhocTask></tns:isAdhocTask>
            <tns:allowAdhocTask></tns:allowAdhocTask>
            <tns:adhocIndex></tns:adhocIndex>
            <tns:associatedTaskID></tns:associatedTaskID>
            <tns:adhocformType></tns:adhocformType>
            <tns:adhocPlacement></tns:adhocPlacement>
            <tns:adhocNote></tns:adhocNote>
        </tns:metadata>
        <tns:input/>
    </tns:task>
    <tns:participantToken></tns:participantToken>
</tns:createRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskCompleted">
              <bpel:from>
                <bpel:literal>false</bpel:literal>
              </bpel:from>
              <bpel:to>$taskCompleted</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskClaimed">
              <bpel:from>
                <bpel:literal>false</bpel:literal>
              </bpel:from>
              <bpel:to>$taskClaimed</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskEscalated">
              <bpel:from>
                <bpel:literal>false</bpel:literal>
              </bpel:from>
              <bpel:to>$taskEscalated</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$createTaskResponse">
              <bpel:from>
                <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:instanceId></b4p:instanceId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:dismissAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:dismissAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
        <b4p:globalAttachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:globalAttachments>
    </b4p:taskMetaData>
    <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
              </bpel:from>
              <bpel:to>$createTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$initialOwners">
              <bpel:from>
                <bpel:literal>
<typeWrapper>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
</typeWrapper></bpel:literal>
              </bpel:from>
              <bpel:to>$initialOwners</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$NextTaskReady">
              <bpel:from>
                <bpel:literal>
<b4p:chainedExecution>
  <b4p:previousTaskId></b4p:previousTaskId>
  <b4p:nextTaskId></b4p:nextTaskId>
  <b4p:nextTaskURL></b4p:nextTaskURL>
</b4p:chainedExecution></bpel:literal>
              </bpel:from>
              <bpel:to>$NextTaskReady.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$taskId">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$taskId</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$isSingleActivit">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$isSingleActivit</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$CreateTaskSingleActivityResponse">
              <bpel:from>
                <bpel:literal>
<b4p:createTaskSingleActivityResponse>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:taskOutput></b4p:taskOutput>
  <b4p:user></b4p:user>
  <b4p:status></b4p:status>
  <b4p:participantToken></b4p:participantToken>
</b4p:createTaskSingleActivityResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$CreateTaskSingleActivityResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$adhocDataVar">
              <bpel:from>
                <bpel:literal>
<typeWrapper>
  <b4p:isAdhocTask></b4p:isAdhocTask>
  <b4p:associatedTaskID></b4p:associatedTaskID>
  <b4p:adhocPlacement></b4p:adhocPlacement>
</typeWrapper></bpel:literal>
              </bpel:from>
              <bpel:to>$adhocDataVar</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$responseSent">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$responseSent</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$LinkTaskWithUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:linkPATaskWithUBPInfo>
  <taskId></taskId>
  <ubpInstanceId></ubpInstanceId>
  <tmpInstanceId></tmpInstanceId>
  <activityInfo></activityInfo>
  <taskRequestVar></taskRequestVar>
  <taskResponseVar></taskResponseVar>
</AdhocTaskManagement1:linkPATaskWithUBPInfo></bpel:literal>
              </bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$GetTaskInfoRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:getUBPInfoForPATask>
  <taskId></taskId>
</AdhocTaskManagement1:getUBPInfoForPATask></bpel:literal>
              </bpel:from>
              <bpel:to>$GetTaskInfoRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$AddAdhocTaskRequestVarToUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:addAdhocTaskVariableToUBP>
  <instanceId></instanceId>
  <variableName></variableName>
  <variableValue></variableValue>
</AdhocTaskManagement1:addAdhocTaskVariableToUBP></bpel:literal>
              </bpel:from>
              <bpel:to>$AddAdhocTaskRequestVarToUBPRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$AddAdhocTaskResponseVarToUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:addAdhocTaskVariableToUBP>
  <instanceId></instanceId>
  <variableName></variableName>
  <variableValue></variableValue>
</AdhocTaskManagement1:addAdhocTaskVariableToUBP></bpel:literal>
              </bpel:from>
              <bpel:to>$AddAdhocTaskResponseVarToUBPRequest.parameters</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$SendAdhocTaskEventToUBPRequest">
              <bpel:from>
                <bpel:literal>
<AdhocTaskManagement1:sendAdhocTaskEventToUBP>
  <adhocTaskEventDetails></adhocTaskEventDetails>
  <instanceId></instanceId>
  <adhocTaskId></adhocTaskId>
  <parentTaskId></parentTaskId>
</AdhocTaskManagement1:sendAdhocTaskEventToUBP></bpel:literal>
              </bpel:from>
              <bpel:to>$SendAdhocTaskEventToUBPRequest.parameters</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:assign bpmn:label="Create Task Single&#13;&#10;Activity" name="Create_Task_Single__Activity-1" bpmn:id="_4YwTQOXQEeWG7YrGV-y1wQ">
            <bpel:copy>
              <bpel:from>true()</bpel:from>
              <bpel:to>$isSingleActivit</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$CreateTaskSingleActivityRequest.root</bpel:from>
              <bpel:to>$createTaskRequest.root</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>concat(b4px:create(), $ode:pid)</bpel:from>
              <bpel:to>$CreateTaskSingleActivityResponse.root/b4p:taskMetaData/b4p:taskId</bpel:to>
            </bpel:copy>
            <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
              <bpel:from>$CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
              <bpel:to>$CreateTaskSingleActivityResponse.root/b4p:taskMetaData/b4p:processId</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
              <bpel:to>$CreateTaskSingleActivityResponse.root/b4p:taskMetaData/b4p:formUrl</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>if (boolean(normalize-space($CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until))) then ($CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until) else (if (boolean(normalize-space($CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) then ((current-dateTime() + xs:yearMonthDuration(xs:duration($CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) + xs:dayTimeDuration(xs:duration($CreateTaskSingleActivityRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))) else (current-dateTime()))</bpel:from>
              <bpel:to>$CreateTaskSingleActivityResponse.root/b4p:taskMetaData/b4p:creationDate</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:reply partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="createTaskSingleActivity" variable="CreateTaskSingleActivityResponse" bpmn:label="Create Task Single&#13;&#10;Activity" name="Create_Task_Single__Activity-2" bpmn:id="_4YwTQOXQEeWG7YrGV-y1wQ">
            <bpel:correlations>
              <bpel:correlation set="task" initiate="join"/>
            </bpel:correlations>
          </bpel:reply>
        </bpel:sequence>
      </bpel:onMessage>
    </bpel:pick>
    <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway" bpmn:id="_-eZb0OXQEeWG7YrGV-y1wQ">
      <bpel:links>
        <bpel:targets></bpel:targets>
      </bpel:links>
    </bpel:empty>
    <bpel:assign bpmn:label="save taskId" name="save_taskId" bpmn:id="_F8Y3YOXREeWG7YrGV-y1wQ">
      <bpel:copy>
        <bpel:from>if (boolean(normalize-space($createTaskResponse.root/b4p:taskMetaData/b4p:taskId))) then ($createTaskResponse.root/b4p:taskMetaData/b4p:taskId) else ($CreateTaskSingleActivityResponse.root/b4p:taskMetaData/b4p:taskId)</bpel:from>
        <bpel:to>$taskId</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:isAdhocTask</bpel:from>
        <bpel:to>$adhocDataVar/b4p:isAdhocTask</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:associatedTaskID</bpel:from>
        <bpel:to>$adhocDataVar/b4p:associatedTaskID</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:adhocPlacement</bpel:from>
        <bpel:to>$adhocDataVar/b4p:adhocPlacement</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:if>
      <bpel:condition>$adhocDataVar/b4p:isAdhocTask = "true"</bpel:condition>
      <bpel:sequence>
        <bpel:assign bpmn:label="get task info" name="get_task_info" bpmn:id="_WDrhwAw2EeaJXvIkfqvwtw">
          <bpel:copy>
            <bpel:from>$adhocDataVar/b4p:associatedTaskID</bpel:from>
            <bpel:to>$GetTaskInfoRequest.parameters/taskId</bpel:to>
          </bpel:copy>
        </bpel:assign>
        <bpel:invoke partnerLink="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" portType="AdhocTaskManagement1:AdhocTaskManagementPortType" operation="getUBPInfoForPATask" inputVariable="GetTaskInfoRequest" outputVariable="GetTaskInfoResponse" bpmn:label="get task info" name="get_task_info-1" bpmn:id="_WDrhwAw2EeaJXvIkfqvwtw"></bpel:invoke>
		<bpel:assign bpmn:label="link adhoc task with UBP" name="link_adhoc_task_with_UBP" bpmn:id="_7YQPwA3cEea8bomSq_kTqg">
          <bpel:copy>
            <bpel:from>$taskId</bpel:from>
            <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters/taskId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:instanceId</bpel:from>
            <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters/ubpInstanceId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$ode:pid</bpel:from>
            <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters/tmpInstanceId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$GetTaskInfoResponse.parameters/taskUBPLinked-info/pmapi:activityInfo</bpel:from>
            <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters/activityInfo</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$GetTaskInfoResponse.parameters/taskUBPLinked-info/pmapi:taskRequestVarName</bpel:from>
            <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters/taskRequestVar</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$GetTaskInfoResponse.parameters/taskUBPLinked-info/pmapi:taskResponseVarName</bpel:from>
            <bpel:to>$LinkAdhocTaskWithUBPRequest.parameters/taskResponseVar</bpel:to>
          </bpel:copy>
        </bpel:assign>
        <bpel:invoke partnerLink="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" portType="AdhocTaskManagement1:AdhocTaskManagementPortType" operation="linkPATaskWithUBPInfo" inputVariable="LinkAdhocTaskWithUBPRequest" outputVariable="LinkAdhocTaskWithUBPResponse" bpmn:label="link adhoc task with UBP" name="link_adhoc_task_with_UBP-1" bpmn:id="_7YQPwA3cEea8bomSq_kTqg"></bpel:invoke>
        <bpel:flow bpmn:label="Parallel_Gateway" name="Parallel_Gateway" bpmn:id="_siawcAFFEeaucMvW1WrsLw">
          <bpel:sequence>
            <bpel:assign bpmn:label="add createTask request Adhoc Task Variable To UBP" name="add_createTask_request_Adhoc_Task_Variable_To_UBP" bpmn:id="_uYI78AFFEeaucMvW1WrsLw">
              <bpel:copy>
                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:instanceId</bpel:from>
                <bpel:to>$AddAdhocTaskRequestVarToUBPRequest.parameters/instanceId</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>concat("aha", $ode:pid, "_", $GetTaskInfoResponse.parameters/taskUBPLinked-info/pmapi:taskRequestVarName)</bpel:from>
                <bpel:to>$AddAdhocTaskRequestVarToUBPRequest.parameters/variableName</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>$createTaskRequest.root</bpel:from>
                <bpel:to>$AddAdhocTaskRequestVarToUBPRequest.parameters/variableValue</bpel:to>
              </bpel:copy>
            </bpel:assign>
            <bpel:invoke partnerLink="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" portType="AdhocTaskManagement1:AdhocTaskManagementPortType" operation="addAdhocTaskVariableToUBP" inputVariable="AddAdhocTaskRequestVarToUBPRequest" outputVariable="AddAdhocTaskRequestVarToUBPResponse" bpmn:label="add createTask request Adhoc Task Variable To UBP" name="add_createTask_request_Adhoc_Task_Variable_To_UBP-1" bpmn:id="_uYI78AFFEeaucMvW1WrsLw"></bpel:invoke>
          </bpel:sequence>
          <bpel:sequence>
            <bpel:assign bpmn:label="add createTask response Adhoc Task Variable To UBP" name="add_createTask_response_Adhoc_Task_Variable_To_UBP" bpmn:id="_uz2AgAFFEeaucMvW1WrsLw">
              <bpel:copy>
                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:instanceId</bpel:from>
                <bpel:to>$AddAdhocTaskResponseVarToUBPRequest.parameters/instanceId</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>concat("aha", $ode:pid, "_", $GetTaskInfoResponse.parameters/taskUBPLinked-info/pmapi:taskResponseVarName)</bpel:from>
                <bpel:to>$AddAdhocTaskResponseVarToUBPRequest.parameters/variableName</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>$createTaskResponse.root</bpel:from>
                <bpel:to>$AddAdhocTaskResponseVarToUBPRequest.parameters/variableValue</bpel:to>
              </bpel:copy>
            </bpel:assign>
            <bpel:invoke partnerLink="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" portType="AdhocTaskManagement1:AdhocTaskManagementPortType" operation="addAdhocTaskVariableToUBP" inputVariable="AddAdhocTaskResponseVarToUBPRequest" outputVariable="AddAdhocTaskResponseVarToUBPResponse" bpmn:label="add createTask response Adhoc Task Variable To UBP" name="add_createTask_response_Adhoc_Task_Variable_To_UBP-1" bpmn:id="_uz2AgAFFEeaucMvW1WrsLw"></bpel:invoke>
          </bpel:sequence>
        </bpel:flow>
        <bpel:assign bpmn:label="send Adhoc Task Event To UBP" name="send_Adhoc_Task_Event_To_UBP" bpmn:id="_UvLn8AFJEeaucMvW1WrsLw">
          <bpel:copy>
            <bpel:from>$GetTaskInfoResponse.parameters/taskUBPLinked-info/pmapi:activityInfo</bpel:from>
            <bpel:to>$SendAdhocTaskEventToUBPRequest.parameters/adhocTaskEventDetails</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:instanceId</bpel:from>
            <bpel:to>$SendAdhocTaskEventToUBPRequest.parameters/instanceId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$taskId</bpel:from>
            <bpel:to>$SendAdhocTaskEventToUBPRequest.parameters/adhocTaskId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$adhocDataVar/b4p:associatedTaskID</bpel:from>
            <bpel:to>$SendAdhocTaskEventToUBPRequest.parameters/parentTaskId</bpel:to>
          </bpel:copy>
        </bpel:assign>
        <bpel:invoke partnerLink="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" portType="AdhocTaskManagement1:AdhocTaskManagementPortType" operation="sendAdhocTaskEventToUBP" inputVariable="SendAdhocTaskEventToUBPRequest" outputVariable="SendAdhocTaskEventToUBPResponse" bpmn:label="send Adhoc Task Event To UBP" name="send_Adhoc_Task_Event_To_UBP-1" bpmn:id="_UvLn8AFJEeaucMvW1WrsLw"></bpel:invoke>
      </bpel:sequence>
      <bpel:else>
        <bpel:sequence>
          <bpel:assign bpmn:label="link task with UBP" name="link_task_with_UBP" bpmn:id="_lC1eIAw1Eea-QqjAf1M8Bw">
            <bpel:copy>
              <bpel:from>$taskId</bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters/taskId</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:instanceId</bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters/ubpInstanceId</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$ode:pid</bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters/tmpInstanceId</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:activityInfo</bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters/activityInfo</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:taskRequestVarUBP</bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters/taskRequestVar</bpel:to>
            </bpel:copy>
            <bpel:copy>
              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:taskResponseVarUBP</bpel:from>
              <bpel:to>$LinkTaskWithUBPRequest.parameters/taskResponseVar</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:invoke partnerLink="taskManagementProcessAndAdhocTaskManagementForAdhocTaskManagementPortPlkVar" portType="AdhocTaskManagement1:AdhocTaskManagementPortType" operation="linkPATaskWithUBPInfo" inputVariable="LinkTaskWithUBPRequest" outputVariable="LinkTaskWithUBPResponse" bpmn:label="link task with UBP" name="link_task_with_UBP-1" bpmn:id="_lC1eIAw1Eea-QqjAf1M8Bw"></bpel:invoke>
        </bpel:sequence>
      </bpel:else>
    </bpel:if>
    <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-1" bpmn:id="_uk-I4AIHEeafyJxIhaL8-g">
      <bpel:links>
        <bpel:targets></bpel:targets>
      </bpel:links>
    </bpel:empty>
    <bpel:if>
      <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until))</bpel:condition>
      <bpel:sequence>
        <bpel:wait bpmn:label="defer Activation until a date" name="defer_Activation_until_a_date" bpmn:id="_OjQXsLD5Edy6MtvbqSLrQw">
          <bpel:until>$createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:until</bpel:until>
        </bpel:wait>
      </bpel:sequence>
      <bpel:elseif>
        <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for))</bpel:condition>
        <bpel:sequence>
          <bpel:wait bpmn:label="defer activation for a duration" name="defer_activation_for_a_duration" bpmn:id="_R9Y8QLD5Edy6MtvbqSLrQw">
            <bpel:for>$createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:deferActivation/b4p:for</bpel:for>
          </bpel:wait>
        </bpel:sequence>
      </bpel:elseif>
    </bpel:if>
    <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-2" bpmn:id="_QOOEsLD5Edy6MtvbqSLrQw">
      <bpel:links>
        <bpel:targets></bpel:targets>
      </bpel:links>
    </bpel:empty>
    <bpel:assign bpmn:label="Prepare creation Task in Database" name="Prepare_creation_Task_in_Database" bpmn:id="_Yppk0Kd1EdyId4P63ChZuw">
      <bpel:copy>
        <bpel:from>"activity"</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskType</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:description</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:description</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:processId</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $createTMSTaskRequest.createRequest, "metadata", $createTaskRequest.root/b4p:taskMetaData)</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:instanceId</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:instanceId</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$taskId</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskId</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:if>
      <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:until))</bpel:condition>
      <bpel:sequence>
        <bpel:assign bpmn:label="Calculate deadline if date is specified" name="Calculate_deadline_if_date_is_specified" bpmn:id="_T6VwQMMEEdyCWZdoTEFyaQ">
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:until</bpel:from>
            <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline</bpel:to>
          </bpel:copy>
        </bpel:assign>
      </bpel:sequence>
      <bpel:elseif>
        <bpel:condition>boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:for))</bpel:condition>
        <bpel:sequence>
          <bpel:assign bpmn:label="Calculate deadline if duration  is specified" name="Calculate_deadline_if_duration__is_specified" bpmn:id="_WRDI8MMEEdyCWZdoTEFyaQ">
            <bpel:copy>
              <bpel:from>(current-dateTime() + xs:dayTimeDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:for))) + xs:yearMonthDuration(xs:duration($createTaskRequest.root/b4p:taskMetaData/b4p:scheduledActions/b4p:expiration/b4p:for))</bpel:from>
              <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline</bpel:to>
            </bpel:copy>
          </bpel:assign>
        </bpel:sequence>
      </bpel:elseif>
    </bpel:if>
    <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-3" bpmn:id="_SsT24MMEEdyCWZdoTEFyaQ">
      <bpel:links>
        <bpel:targets></bpel:targets>
      </bpel:links>
    </bpel:empty>
    <bpel:scope bpmn:label="Pass Attachments" name="Pass_Attachments" bpmn:id="_qCKssG7fEd2I0ZzPPBs2Wg">
      <bpel:faultHandlers>
        <bpel:catchAll>
          <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event" bpmn:id="_uIRmcG7fEd2I0ZzPPBs2Wg"/>
        </bpel:catchAll>
      </bpel:faultHandlers>
      <bpel:sequence>
        <bpel:assign bpmn:label="Pass Attachments" name="Pass_Attachments-1" bpmn:id="_qC6TkG7fEd2I0ZzPPBs2Wg">
          <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:attachments</bpel:from>
            <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:attachments</bpel:to>
          </bpel:copy>
        </bpel:assign>
      </bpel:sequence>
    </bpel:scope>
    <bpel:assign bpmn:label="Create Task in Database" name="Create_Task_in_Database" bpmn:id="_jiUMsKgTEdylDI4yblkdQQ">
      <bpel:copy>
        <bpel:from>bpel:doXslTransform("actions.xsl", $createTMSTaskRequest.createRequest, "metadata", $createTaskRequest.root/b4p:taskMetaData)</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:formUrl</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$createTaskRequest.root/b4p:taskInput</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:input</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:userProcessCompleteSOAPAction</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>"activity"</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskType</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>if (boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:priority))) then ($createTaskRequest.root/b4p:taskMetaData/b4p:priority) else ("")</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:priority</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:creationDate/text()</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:creationDate</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>if (exists($createTaskRequest.root/b4p:taskMetaData/b4p:taskState/text())) then ($createTaskRequest.root/b4p:taskMetaData/b4p:taskState/text()) else ("READY")</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:taskState</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>if (exists($createTaskRequest.root/b4p:taskMetaData/b4p:globalAttachments)) then (bpel:doXslTransform("changeNamespace.xsl", $createTaskRequest.root/b4p:taskMetaData/b4p:globalAttachments)) else ("")</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:globalAttachments</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:isAdhocTask</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:isAdhocTask</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:allowAdhocTask</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:allowAdhocTask</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:adhocIndex</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:adhocIndex</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:associatedTaskID</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:associatedTaskID</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:adhocformType</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:adhocformType</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:adhocPlacement</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:adhocPlacement</bpel:to>
      </bpel:copy>
      <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:adhocNote</bpel:from>
        <bpel:to>$createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:adhocNote</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="create" inputVariable="createTMSTaskRequest" outputVariable="createTMSTaskResponse" bpmn:label="Create Task in Database" name="Create_Task_in_Database-1" bpmn:id="_jiUMsKgTEdylDI4yblkdQQ"></bpel:invoke>
    <bpel:if>
      <bpel:condition>$createTaskRequest.root/b4p:taskMetaData/b4p:isChainedBefore/text() = "true"</bpel:condition>
      <bpel:sequence>
        <bpel:assign bpmn:label="Notify previous Task Manager" name="Notify_previous_Task_Manager" bpmn:id="_DkaEoKgeEdylDI4yblkdQQ">
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:previousTaskId</bpel:from>
            <bpel:to>$NextTaskReady.root/b4p:previousTaskId</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:formUrl</bpel:from>
            <bpel:to>$NextTaskReady.root/b4p:nextTaskURL</bpel:to>
          </bpel:copy>
          <bpel:copy>
            <bpel:from>$taskId</bpel:from>
            <bpel:to>$NextTaskReady.root/b4p:nextTaskId</bpel:to>
          </bpel:copy>
        </bpel:assign>
        <bpel:invoke partnerLink="taskManagementProcessAndPreviousProcessTaskManagerForTMPPortPlkVar" portType="b4p:TMPPortType" operation="nextTaskReady" inputVariable="NextTaskReady" bpmn:label="Notify previous Task Manager" name="Notify_previous_Task_Manager-1" bpmn:id="_DkaEoKgeEdylDI4yblkdQQ"></bpel:invoke>
      </bpel:sequence>
    </bpel:if>
    <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-4" bpmn:id="_XFgswKgeEdylDI4yblkdQQ">
      <bpel:links>
        <bpel:targets></bpel:targets>
      </bpel:links>
    </bpel:empty>
    <bpel:scope bpmn:label="Handle Requests" name="Handle_Requests" bpmn:id="_TbKiIKhDEdyQFMjeTyvJzg">
      <bpel:variables>
        <bpel:variable name="reassignTMSEscalateRequest" messageType="tns:reassignRequest"/>
        <bpel:variable name="reassignTMSEscalateResponse" messageType="tns:okResponse"/>
        <bpel:variable name="completeTaskRequest" messageType="b4p:completeTaskRequest"/>
        <bpel:variable name="completeTaskResponse" messageType="b4p:completeTaskResponse"/>
        <bpel:variable name="claimTaskRequest" messageType="b4p:claimTaskRequest"/>
        <bpel:variable name="claimTaskResponse" messageType="b4p:claimTaskResponse"/>
        <bpel:variable name="revokeTaskRequest" messageType="b4p:revokeTaskRequest"/>
        <bpel:variable name="revokeTaskResponse" messageType="b4p:revokeTaskResponse"/>
        <bpel:variable name="escalateTaskRequest" messageType="b4p:escalateTaskRequest"/>
        <bpel:variable name="escalateTaskResponse" messageType="b4p:escalateTaskResponse"/>
        <bpel:variable name="notifyTaskCompletionResponse" messageType="UserBusinessProcess1:notifyTaskCompletionResponse"/>
        <bpel:variable name="notifyTaskCompletionRequest" messageType="UserBusinessProcess1:notifyTaskCompletionRequest"/>
        <bpel:variable name="TMSskipRequest" messageType="tns:skipRequest"/>
        <bpel:variable name="TMSskipResponse" messageType="tns:okResponse"/>
        <bpel:variable name="SkipTaskRequestMsg" messageType="b4p:skipTaskRequest"/>
        <bpel:variable name="SkipTaskRequest" messageType="b4p:skipTaskResponse"/>
        <bpel:variable name="NextTaskReady" messageType="b4p:nextTaskReady"/>
        <bpel:variable name="GetTaskOwnerAndStateRequest" messageType="tns:getTaskOwnerAndStateRequest"/>
        <bpel:variable name="GetTaskOwnerAndStateResponse" messageType="tns:getTaskOwnerAndStateResponse"/>
        <bpel:variable name="notifyTaskCompletionSingleActivtyRequest" messageType="UserBusinessProcess1:createTaskSingleActivityResponse"/>
        <bpel:variable name="hasPendingParallelTasks" type="xs:boolean"/>
        <bpel:variable name="tasks" element="b4p:tasks"/>
        <bpel:variable name="mainTaskId" type="xs:string"/>
        <bpel:variable name="pendingPrecedingTasks" element="b4p:tasks"/>
        <bpel:variable name="pendingSucceedingTasks" element="b4p:tasks"/>
        <bpel:variable name="GetAttachmentsResponse" messageType="tns:getAttachmentsResponse"/>
        <bpel:variable name="GetAttachmentsRequest" messageType="tns:getAttachmentsRequest"/>
        <bpel:variable name="GetGlobalAttachmentsResponse" messageType="tns:getAttachmentsResponse"/>
        <bpel:variable name="GetGlobalAttachmentsRequest" messageType="tns:getAttachmentsRequest"/>
        <bpel:variable name="pendingParallelTasks" element="b4p:tasks"/>
        <bpel:variable name="proceedWithNotification" type="xs:boolean"/>
      </bpel:variables>
      <bpel:faultHandlers>
        <bpel:catch faultName="this:DeadlineReached">
          <bpel:scope bpmn:label="SubProcess" name="SubProcess" bpmn:id="_3Ct-YLEgEdy6MtvbqSLrQw">
            <bpel:variables>
              <bpel:variable name="notifyTaskDeadlineReachedSingleActivtyRequest" messageType="UserBusinessProcess1:createTaskSingleActivityResponse"/>
              <bpel:variable name="FailTaskResponse" messageType="tns:okResponse"/>
              <bpel:variable name="FailTaskRequest" messageType="tns:failRequest"/>
              <bpel:variable name="notifyTaskDeadlineReachedResponse" messageType="UserBusinessProcess1:notifyTaskCompletionResponse"/>
              <bpel:variable name="notifyTaskDeadlineReachedRequest" messageType="UserBusinessProcess1:notifyTaskCompletionRequest"/>
            </bpel:variables>
            <bpel:sequence>
              <bpel:assign name="init-variables-SubProcess" bpmn:id="_3Ct-YLEgEdy6MtvbqSLrQw">
                <bpel:copy bpmn:label="$notifyTaskDeadlineReachedSingleActivtyRequest">
                  <bpel:from>
                    <bpel:literal>
<b4p:createTaskSingleActivityResponse>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:taskOutput></b4p:taskOutput>
  <b4p:user></b4p:user>
  <b4p:status></b4p:status>
  <b4p:participantToken></b4p:participantToken>
</b4p:createTaskSingleActivityResponse></bpel:literal>
                  </bpel:from>
                  <bpel:to>$notifyTaskDeadlineReachedSingleActivtyRequest.root</bpel:to>
                </bpel:copy>
                <bpel:copy bpmn:label="$FailTaskRequest">
                  <bpel:from>
                    <bpel:literal>
<tns:failRequest>
  <tns:taskId></tns:taskId>
  <tns:code></tns:code>
  <tns:message></tns:message>
  <tns:participantToken></tns:participantToken>
</tns:failRequest></bpel:literal>
                  </bpel:from>
                  <bpel:to>$FailTaskRequest.failRequest</bpel:to>
                </bpel:copy>
                <bpel:copy bpmn:label="$notifyTaskDeadlineReachedRequest">
                  <bpel:from>
                    <bpel:literal>
<b4p:notifyTaskCompletionRequest>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:taskOutput></b4p:taskOutput>
  <b4p:user></b4p:user>
  <b4p:status></b4p:status>
  <b4p:participantToken></b4p:participantToken>
</b4p:notifyTaskCompletionRequest></bpel:literal>
                  </bpel:from>
                  <bpel:to>$notifyTaskDeadlineReachedRequest.root</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:if>
                <bpel:condition>$isSingleActivit</bpel:condition>
                <bpel:sequence>
                  <bpel:assign bpmn:label="Notify Process&#13;&#10;Deadline Reached&#13;&#10;(Single Activity)" name="Notify_Process__Deadline_Reached___Single_Activity_" bpmn:id="_zZnlYPZbEeWLSY7FStN1pA">
                    <bpel:copy>
                      <bpel:from>"DeadlineReached"</bpel:from>
                      <bpel:to>$notifyTaskDeadlineReachedSingleActivtyRequest.root/b4p:status</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:from>
                      <bpel:to>$notifyTaskDeadlineReachedSingleActivtyRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:from>
                      <bpel:to>$notifyTaskDeadlineReachedSingleActivtyRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
                      <bpel:to>$notifyTaskDeadlineReachedSingleActivtyRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:invoke partnerLink="tMPAndUBPPlkVar" portType="UserBusinessProcess1:userProcessPortType" operation="notifyTaskCompletionSingleActivity" inputVariable="notifyTaskDeadlineReachedSingleActivtyRequest" bpmn:label="Notify Process&#13;&#10;Deadline Reached&#13;&#10;(Single Activity)" name="Notify_Process__Deadline_Reached___Single_Activity_-1" bpmn:id="_zZnlYPZbEeWLSY7FStN1pA"></bpel:invoke>
                </bpel:sequence>
                <bpel:else>
                  <bpel:sequence>
                    <bpel:assign bpmn:label="Notify Process Deadline Reached" name="Notify_Process_Deadline_Reached" bpmn:id="_UM9-sMK_EdyR9_IVnPh8Pg">
                      <bpel:copy>
                        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
                        <bpel:to>$notifyTaskDeadlineReachedRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:from>
                        <bpel:to>$notifyTaskDeadlineReachedRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:from>
                        <bpel:to>$notifyTaskDeadlineReachedRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:to>
                      </bpel:copy>
                      <bpel:copy>
                        <bpel:from>"DeadlineReached"</bpel:from>
                        <bpel:to>$notifyTaskDeadlineReachedRequest.root/b4p:status</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                    <bpel:invoke partnerLink="tMPAndUBPPlkVar" portType="UserBusinessProcess1:userProcessPortType" operation="notifyTaskCompletion" inputVariable="notifyTaskDeadlineReachedRequest" outputVariable="notifyTaskDeadlineReachedResponse" bpmn:label="Notify Process Deadline Reached" name="Notify_Process_Deadline_Reached-1" bpmn:id="_UM9-sMK_EdyR9_IVnPh8Pg"></bpel:invoke>
                  </bpel:sequence>
                </bpel:else>
              </bpel:if>
              <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-5" bpmn:id="_2CnA4PZbEeWLSY7FStN1pA">
                <bpel:links>
                  <bpel:targets></bpel:targets>
                </bpel:links>
              </bpel:empty>
              <bpel:assign bpmn:label="Change Task status to Failed" name="Change_Task_status_to_Failed" bpmn:id="_FyrywLEhEdy6MtvbqSLrQw">
                <bpel:copy>
                  <bpel:from>$taskId</bpel:from>
                  <bpel:to>$FailTaskRequest.failRequest/tns:taskId</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="fail" inputVariable="FailTaskRequest" outputVariable="FailTaskResponse" bpmn:label="Change Task status to Failed" name="Change_Task_status_to_Failed-1" bpmn:id="_FyrywLEhEdy6MtvbqSLrQw"></bpel:invoke>
            </bpel:sequence>
          </bpel:scope>
        </bpel:catch>
      </bpel:faultHandlers>
      <bpel:eventHandlers>
        <bpel:onAlarm>
          <bpel:until>if (boolean(normalize-space($createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline))) then ($createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline) else (current-dateTime())</bpel:until>
          <bpel:if>
            <bpel:condition>boolean(normalize-space($createTMSTaskRequest.createRequest/tns:task/tns:metadata/tns:deadline))</bpel:condition>
            <bpel:if>
              <bpel:condition>$responseSent</bpel:condition>
              <bpel:sequence>
                <bpel:empty bpmn:label="Do Nothing" name="Do_Nothing" bpmn:id="_JJKtoPyUEeWsJumB7P5gBg"/>
              </bpel:sequence>
              <bpel:else>
                <bpel:sequence>
                  <bpel:throw faultName="this:DeadlineReached"/>
                </bpel:sequence>
              </bpel:else>
            </bpel:if>
            <bpel:else>
              <bpel:sequence>
                <bpel:empty bpmn:label="No deadline &#13;&#10;is specified" name="No_deadline___is_specified" bpmn:id="_i_UPIMUkEdyOLLhtllRYzQ"/>
              </bpel:sequence>
            </bpel:else>
          </bpel:if>
        </bpel:onAlarm>
      </bpel:eventHandlers>
      <bpel:while bpmn:label="Handle Requests" name="Handle_Requests-1">
        <bpel:condition>not($taskCompleted)</bpel:condition>
        <bpel:sequence>
          <bpel:assign name="init-variables-Handle_Requests" bpmn:id="_TbKiIKhDEdyQFMjeTyvJzg">
            <bpel:copy bpmn:label="$reassignTMSEscalateRequest">
              <bpel:from>
                <bpel:literal>
<tns:reassignRequest>
  <tns:taskId></tns:taskId>
  <tns:userOwner></tns:userOwner>
  <tns:roleOwner></tns:roleOwner>
  <tns:taskState></tns:taskState>
  <tns:participantToken></tns:participantToken>
  <tns:userAction></tns:userAction>
</tns:reassignRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$reassignTMSEscalateRequest.reassignRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$completeTaskResponse">
              <bpel:from>
                <bpel:literal><b4p:response>
    <b4p:taskMetaData>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:nextTaskURL></b4p:nextTaskURL>
    </b4p:taskMetaData>
     <b4p:status></b4p:status>
    <b4p:errorCode></b4p:errorCode>
    <b4p:errorReason></b4p:errorReason>
    <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
              </bpel:from>
              <bpel:to>$completeTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$claimTaskResponse">
              <bpel:from>
                <bpel:literal>
<b4p:claimTaskResponse>
  <b4p:status></b4p:status>
</b4p:claimTaskResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$claimTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$revokeTaskResponse">
              <bpel:from>
                <bpel:literal>
<b4p:revokeTaskResponse>
  <b4p:status></b4p:status>
</b4p:revokeTaskResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$revokeTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$escalateTaskResponse">
              <bpel:from>
                <bpel:literal>
<b4p:escalateTaskResponse>
  <b4p:status></b4p:status>
</b4p:escalateTaskResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$escalateTaskResponse.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$notifyTaskCompletionRequest">
              <bpel:from>
                <bpel:literal><b4p:notifyTaskCompletionRequest>
    <b4p:taskMetaData>
        <b4p:taskId></b4p:taskId>
        <b4p:taskState></b4p:taskState>
        <b4p:taskType></b4p:taskType>
        <b4p:description></b4p:description>
        <b4p:processId></b4p:processId>
        <b4p:creationDate></b4p:creationDate>
        <b4p:userOwner></b4p:userOwner>
        <b4p:roleOwner></b4p:roleOwner>
        <b4p:claimAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:claimAction>
        <b4p:revokeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:revokeAction>
        <b4p:saveAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:saveAction>
        <b4p:completeAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:completeAction>
        <b4p:deferAction>
            <b4p:user></b4p:user>
            <b4p:role></b4p:role>
        </b4p:deferAction>
        <b4p:formUrl></b4p:formUrl>
        <b4p:failureCode></b4p:failureCode>
        <b4p:failureReason></b4p:failureReason>
        <b4p:priority></b4p:priority>
        <b4p:scheduledActions>
            <b4p:expiration>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:expiration>
            <b4p:deferActivation>
                <b4p:until></b4p:until>
                <b4p:for></b4p:for>
            </b4p:deferActivation>
        </b4p:scheduledActions>
        <b4p:userEndpoint></b4p:userEndpoint>
        <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
        <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
        <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
        <b4p:isChainedBefore></b4p:isChainedBefore>
        <b4p:previousTaskId></b4p:previousTaskId>
        <b4p:nextTaskId></b4p:nextTaskId>
        <b4p:session></b4p:session>
        <b4p:nextTaskURL></b4p:nextTaskURL>
        <b4p:attachments>
            <attachment>
                <attachmentMetadata>
                    <mimeType></mimeType>
                    <fileName></fileName>
                    <title></title>
                    <description></description>
                    <creationDate></creationDate>
                </attachmentMetadata>
                <payloadUrl></payloadUrl>
            </attachment>
        </b4p:attachments>
        <b4p:globalAttachments>
      		<attachment>
        		<attachmentMetadata>
          			<mimeType></mimeType>
          			<fileName></fileName>
          			<title></title>
          			<description></description>
          			<creationDate></creationDate>
        		</attachmentMetadata>
        		<payloadUrl></payloadUrl>
      		</attachment>
    	</b4p:globalAttachments>
    </b4p:taskMetaData>
    <b4p:taskOutput></b4p:taskOutput>
    <b4p:status></b4p:status>
    <b4p:user></b4p:user>
    <b4p:participantToken></b4p:participantToken>
</b4p:notifyTaskCompletionRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$notifyTaskCompletionRequest.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$TMSskipRequest">
              <bpel:from>
                <bpel:literal>
<tns:skipRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:skipRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$TMSskipRequest.skipRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$SkipTaskRequest">
              <bpel:from>
                <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
              </bpel:from>
              <bpel:to>$SkipTaskRequest.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$GetTaskOwnerAndStateRequest">
              <bpel:from>
                <bpel:literal>
<tns:getTaskOwnerAndStateRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:getTaskOwnerAndStateRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$GetTaskOwnerAndStateRequest.getTaskOwnerAndStateRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$notifyTaskCompletionSingleActivtyRequest">
              <bpel:from>
                <bpel:literal>
<b4p:createTaskSingleActivityResponse>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:taskOutput></b4p:taskOutput>
  <b4p:user></b4p:user>
  <b4p:status></b4p:status>
  <b4p:participantToken></b4p:participantToken>
</b4p:createTaskSingleActivityResponse></bpel:literal>
              </bpel:from>
              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$hasPendingParallelTasks">
              <bpel:from>
                <bpel:literal>true</bpel:literal>
              </bpel:from>
              <bpel:to>$hasPendingParallelTasks</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$tasks">
              <bpel:from>
                <bpel:literal><b4p:tasks>
</b4p:tasks></bpel:literal>
              </bpel:from>
              <bpel:to>$tasks</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$mainTaskId">
              <bpel:from>
                <bpel:literal></bpel:literal>
              </bpel:from>
              <bpel:to>$mainTaskId</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$pendingPrecedingTasks">
              <bpel:from>
                <bpel:literal><b4p:tasks>
</b4p:tasks></bpel:literal>
              </bpel:from>
              <bpel:to>$pendingPrecedingTasks</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$pendingSucceedingTasks">
              <bpel:from>
                <bpel:literal><b4p:tasks>
</b4p:tasks></bpel:literal>
              </bpel:from>
              <bpel:to>$pendingSucceedingTasks</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$GetAttachmentsRequest">
              <bpel:from>
                <bpel:literal>
<tns:getAttachmentsRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
  <tns:globalAttachment></tns:globalAttachment>
</tns:getAttachmentsRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$GetAttachmentsRequest.getAttachmentsRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$GetGlobalAttachmentsRequest">
              <bpel:from>
                <bpel:literal>
<tns:getAttachmentsRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
  <tns:globalAttachment></tns:globalAttachment>
</tns:getAttachmentsRequest></bpel:literal>
              </bpel:from>
              <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$pendingParallelTasks">
              <bpel:from>
                <bpel:literal><b4p:tasks>
</b4p:tasks></bpel:literal>
              </bpel:from>
              <bpel:to>$pendingParallelTasks</bpel:to>
            </bpel:copy>
            <bpel:copy bpmn:label="$proceedWithNotification">
              <bpel:from>
                <bpel:literal>true</bpel:literal>
              </bpel:from>
              <bpel:to>$proceedWithNotification</bpel:to>
            </bpel:copy>
          </bpel:assign>
          <bpel:pick bpmn:label="Waiting for requests" name="Waiting_for_requests" bpmn:id="_ESlcoKhHEdyQFMjeTyvJzg">
            <bpel:onMessage partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="escalateTask" variable="escalateTaskRequest" bpmn:label="Receive escalate&#13;&#10;Task Request" name="Receive_escalate__Task_Request" bpmn:id="_P5U2QKhHEdyQFMjeTyvJzg">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:sequence>
                  <bpel:assign bpmn:label="Invoke TMS to reassign Task" name="Invoke_TMS_to_reassign_Task" bpmn:id="_p3IKIKhJEdyQFMjeTyvJzg">
                    <bpel:copy>
                      <bpel:from>"READY"</bpel:from>
                      <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:taskState</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $reassignTMSEscalateRequest.reassignRequest, "metadata", $escalateTaskRequest.root)</bpel:from>
                      <bpel:to>$reassignTMSEscalateRequest.reassignRequest</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>"ESCALATE"</bpel:from>
                      <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:userAction</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$escalateTaskRequest.root/b4p:taskId</bpel:from>
                      <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:taskId</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="reassign" inputVariable="reassignTMSEscalateRequest" outputVariable="reassignTMSEscalateResponse" bpmn:label="Invoke TMS to reassign Task" name="Invoke_TMS_to_reassign_Task-1" bpmn:id="_p3IKIKhJEdyQFMjeTyvJzg"></bpel:invoke>
                  <bpel:assign bpmn:label="Send response&#13;&#10;back to UBP" name="Send_response__back_to_UBP" bpmn:id="_NRL9EKhMEdyQFMjeTyvJzg">
                    <bpel:copy>
                      <bpel:from>false()</bpel:from>
                      <bpel:to>$taskClaimed</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>"OK"</bpel:from>
                      <bpel:to>$escalateTaskResponse.root/b4p:status</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>true()</bpel:from>
                      <bpel:to>$taskEscalated</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:reply partnerLink="tMPAndUBPPlkVar" portType="b4p:UserBusinessProcessPortType" operation="escalateTask" variable="escalateTaskResponse" bpmn:label="Send response&#13;&#10;back to UBP" name="Send_response__back_to_UBP-1" bpmn:id="_NRL9EKhMEdyQFMjeTyvJzg"></bpel:reply>
                  <bpel:empty bpmn:label="Mark task &#13;&#10;as escalated" name="Mark_task___as_escalated" bpmn:id="_9BJAkKhMEdyQFMjeTyvJzg"/>
                </bpel:sequence>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="revokeTask" variable="revokeTaskRequest" bpmn:label="Receive Revoke Request" name="Receive_Revoke_Request" bpmn:id="_7pZP0KkjEdyFPr8ebhWveQ">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:sequence>
                  <bpel:if>
                    <bpel:condition>$taskClaimed</bpel:condition>
                    <bpel:sequence>
                      <bpel:assign bpmn:label="reassign revoked task" name="reassign_revoked_task" bpmn:id="_TtOm0KklEdyFPr8ebhWveQ">
                        <bpel:copy>
                          <bpel:from>"READY"</bpel:from>
                          <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:taskState</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>$revokeTaskRequest.root/b4p:taskId</bpel:from>
                          <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:taskId</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>$revokeTaskRequest.root/b4p:participantToken</bpel:from>
                          <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:participantToken</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $reassignTMSEscalateRequest.reassignRequest, "metadata", $initialOwners)</bpel:from>
                          <bpel:to>$reassignTMSEscalateRequest.reassignRequest</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>"REVOKE"</bpel:from>
                          <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:userAction</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="reassign" inputVariable="reassignTMSEscalateRequest" outputVariable="reassignTMSEscalateResponse" bpmn:label="reassign revoked task" name="reassign_revoked_task-1" bpmn:id="_TtOm0KklEdyFPr8ebhWveQ"></bpel:invoke>
                    </bpel:sequence>
                  </bpel:if>
                  <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-6" bpmn:id="_8zpt4A7REd6OcttEdwEXRA">
                    <bpel:links>
                      <bpel:targets></bpel:targets>
                    </bpel:links>
                  </bpel:empty>
                  <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="revokeTask" variable="revokeTaskResponse" bpmn:label="send revoke Task &#13;&#10;response to UIFW" name="send_revoke_Task___response_to_UIFW" bpmn:id="_FpfJ0KkmEdyFPr8ebhWveQ"></bpel:reply>
                  <bpel:assign bpmn:label="mark task as &#13;&#10;not claimed" name="mark_task_as___not_claimed" bpmn:id="_KlyrwKkmEdyFPr8ebhWveQ">
                    <bpel:copy>
                      <bpel:from>false()</bpel:from>
                      <bpel:to>$taskClaimed</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                </bpel:sequence>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="claimTask" variable="claimTaskRequest" bpmn:label="Receive Claim request" name="Receive_Claim_request" bpmn:id="_WYkDIKkOEdyRnIK1kDiFhA">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:sequence>
                  <bpel:assign bpmn:label="invoke getTaskOwnerAndState" name="invoke_getTaskOwnerAndState" bpmn:id="_eNnjsHCyEeCgnvh2GwOYwA">
                    <bpel:copy>
                      <bpel:from>$claimTaskRequest.root/b4p:taskId</bpel:from>
                      <bpel:to>$GetTaskOwnerAndStateRequest.getTaskOwnerAndStateRequest/tns:taskId</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$claimTaskRequest.root/b4p:participantToken</bpel:from>
                      <bpel:to>$GetTaskOwnerAndStateRequest.getTaskOwnerAndStateRequest/tns:participantToken</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getTaskOwnerAndState" inputVariable="GetTaskOwnerAndStateRequest" outputVariable="GetTaskOwnerAndStateResponse" bpmn:label="invoke getTaskOwnerAndState" name="invoke_getTaskOwnerAndState-1" bpmn:id="_eNnjsHCyEeCgnvh2GwOYwA"></bpel:invoke>
                  <bpel:if>
                    <bpel:condition>$GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "COMPLETED"</bpel:condition>
                    <bpel:sequence>
                      <bpel:assign bpmn:label="Send Status" name="Send_Status" bpmn:id="_rs1LwHC7EeCgnvh2GwOYwA">
                        <bpel:copy>
                          <bpel:from>"The task has been completed already"</bpel:from>
                          <bpel:to>$claimTaskResponse.root/b4p:status</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>true()</bpel:from>
                          <bpel:to>$taskCompleted</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                    </bpel:sequence>
                    <bpel:elseif>
                      <bpel:condition>($GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "CLAIMED") and ($claimTaskRequest.root/b4p:claimerUser/text() != $GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:userOwner/text())</bpel:condition>
                      <bpel:sequence>
                        <bpel:assign bpmn:label="Send Status" name="Send_Status-1" bpmn:id="_s5a6sHC7EeCgnvh2GwOYwA">
                          <bpel:copy>
                            <bpel:from>concat("The task had been claimed by ", $GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:userOwner/text())</bpel:from>
                            <bpel:to>$claimTaskResponse.root/b4p:status</bpel:to>
                          </bpel:copy>
                          <bpel:copy>
                            <bpel:from>true()</bpel:from>
                            <bpel:to>$taskClaimed</bpel:to>
                          </bpel:copy>
                        </bpel:assign>
                      </bpel:sequence>
                    </bpel:elseif>
                    <bpel:else>
                      <bpel:if>
                        <bpel:condition>$GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState = "CLAIMED"</bpel:condition>
                        <bpel:empty/>
                        <bpel:else>
                          <bpel:sequence>
                            <bpel:if>
                              <bpel:condition>$taskEscalated</bpel:condition>
                              <bpel:sequence>
                                <bpel:assign bpmn:label="save previous owners from escalation request " name="save_previous_owners_from_escalation_request" bpmn:id="_wb66gKkSEdyRnIK1kDiFhA">
                                  <bpel:copy>
                                    <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $initialOwners, "metadata", $escalateTaskRequest.root)</bpel:from>
                                    <bpel:to>$initialOwners</bpel:to>
                                  </bpel:copy>
                                </bpel:assign>
                              </bpel:sequence>
                              <bpel:else>
                                <bpel:sequence>
                                  <bpel:assign bpmn:label="save previous owners from creation request" name="save_previous_owners_from_creation_request" bpmn:id="_ChVnwKkTEdyRnIK1kDiFhA">
                                    <bpel:copy>
                                      <bpel:from>bpel:doXslTransform("userRoleOwner.xsl", $initialOwners, "metadata", $createTaskRequest.root/b4p:taskMetaData)</bpel:from>
                                      <bpel:to>$initialOwners</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                </bpel:sequence>
                              </bpel:else>
                            </bpel:if>
                            <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-7" bpmn:id="_IGJUIKkTEdyRnIK1kDiFhA">
                              <bpel:links>
                                <bpel:targets></bpel:targets>
                              </bpel:links>
                            </bpel:empty>
                            <bpel:assign bpmn:label="Invoke TMS to reassign claimed Task" name="Invoke_TMS_to_reassign_claimed_Task" bpmn:id="_D1muMKkiEdyFPr8ebhWveQ">
                              <bpel:copy>
                                <bpel:from>$claimTaskRequest.root/b4p:participantToken</bpel:from>
                                <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:participantToken</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$claimTaskRequest.root/b4p:claimerUser</bpel:from>
                                <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:userOwner[1]</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$claimTaskRequest.root/b4p:taskId</bpel:from>
                                <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:taskId</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>"CLAIMED"</bpel:from>
                                <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:taskState</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>"CLAIM"</bpel:from>
                                <bpel:to>$reassignTMSEscalateRequest.reassignRequest/tns:userAction</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="reassign" inputVariable="reassignTMSEscalateRequest" outputVariable="reassignTMSEscalateResponse" bpmn:label="Invoke TMS to reassign claimed Task" name="Invoke_TMS_to_reassign_claimed_Task-1" bpmn:id="_D1muMKkiEdyFPr8ebhWveQ"></bpel:invoke>
                          </bpel:sequence>
                        </bpel:else>
                      </bpel:if>
                    </bpel:else>
                  </bpel:if>
                  <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-8" bpmn:id="_qXKMIA7LEd6OcttEdwEXRA">
                    <bpel:links>
                      <bpel:targets></bpel:targets>
                    </bpel:links>
                  </bpel:empty>
                  <bpel:assign bpmn:label="send claim Task &#13;&#10;response to UIFW" name="send_claim_Task___response_to_UIFW" bpmn:id="_Vv8-cKkjEdyFPr8ebhWveQ">
                    <bpel:copy>
                      <bpel:from>true()</bpel:from>
                      <bpel:to>$taskClaimed</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="claimTask" variable="claimTaskResponse" bpmn:label="send claim Task &#13;&#10;response to UIFW" name="send_claim_Task___response_to_UIFW-1" bpmn:id="_Vv8-cKkjEdyFPr8ebhWveQ"></bpel:reply>
                  <bpel:empty bpmn:label="mark task &#13;&#10;as claimed" name="mark_task___as_claimed" bpmn:id="_qcCL8KkjEdyFPr8ebhWveQ"/>
                </bpel:sequence>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="skipTask" variable="SkipTaskRequestMsg" bpmn:label="Receive Skip&#13;&#10;Task  Request" name="Receive_Skip__Task__Request" bpmn:id="_4bvxgHB4Ed2pTYDSDTVx7Q">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:sequence>
                  <bpel:assign bpmn:label="Invoke TMS to skip Task" name="Invoke_TMS_to_skip_Task" bpmn:id="_H8BBcHB5Ed2pTYDSDTVx7Q">
                    <bpel:copy>
                      <bpel:from>$SkipTaskRequestMsg.root/b4p:taskId</bpel:from>
                      <bpel:to>$TMSskipRequest.skipRequest/tns:taskId</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$SkipTaskRequestMsg.root/b4p:participantToken</bpel:from>
                      <bpel:to>$TMSskipRequest.skipRequest/tns:participantToken</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="skip" inputVariable="TMSskipRequest" outputVariable="TMSskipResponse" bpmn:label="Invoke TMS to skip Task" name="Invoke_TMS_to_skip_Task-1" bpmn:id="_H8BBcHB5Ed2pTYDSDTVx7Q"></bpel:invoke>
                  <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="skipTask" variable="SkipTaskRequest" bpmn:label="Message_Intermediate_Event" name="Message_Intermediate_Event" bpmn:id="_M8ajwHB6Ed2pTYDSDTVx7Q"></bpel:reply>
                  <bpel:assign bpmn:label="Mark Task as skipped" name="Mark_Task_as_skipped" bpmn:id="_ROAUwHB6Ed2pTYDSDTVx7Q">
                    <bpel:copy>
                      <bpel:from>true()</bpel:from>
                      <bpel:to>$taskCompleted</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                </bpel:sequence>
              </bpel:sequence>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="completeTaskRequest" bpmn:label="Receive complete&#13;&#10;Task Request" name="Receive_complete__Task_Request" bpmn:id="_QcFlEKhHEdyQFMjeTyvJzg">
              <bpel:correlations>
                <bpel:correlation set="task" initiate="no"/>
              </bpel:correlations>
              <bpel:sequence>
                <bpel:sequence>
                  <bpel:assign bpmn:label="invoke getTaskOwnerAndState" name="invoke_getTaskOwnerAndState-2" bpmn:id="_ScLvwGqNEeCIDuu8sBfp1g">
                    <bpel:copy>
                      <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                      <bpel:to>$GetTaskOwnerAndStateRequest.getTaskOwnerAndStateRequest/tns:taskId</bpel:to>
                    </bpel:copy>
                    <bpel:copy>
                      <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                      <bpel:to>$GetTaskOwnerAndStateRequest.getTaskOwnerAndStateRequest/tns:participantToken</bpel:to>
                    </bpel:copy>
                  </bpel:assign>
                  <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getTaskOwnerAndState" inputVariable="GetTaskOwnerAndStateRequest" outputVariable="GetTaskOwnerAndStateResponse" bpmn:label="invoke getTaskOwnerAndState" name="invoke_getTaskOwnerAndState-3" bpmn:id="_ScLvwGqNEeCIDuu8sBfp1g"></bpel:invoke>
                  <bpel:if>
                    <bpel:condition>$GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "COMPLETED"</bpel:condition>
                    <bpel:sequence>
                      <bpel:assign bpmn:label="Send Error Reason" name="Send_Error_Reason" bpmn:id="_BmOswHATEeC_Q9O5YGuHjA">
                        <bpel:copy>
                          <bpel:from>"The task has been completed already"</bpel:from>
                          <bpel:to>$completeTaskResponse.root/b4p:errorReason</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>true()</bpel:from>
                          <bpel:to>$taskCompleted</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>"ERROR"</bpel:from>
                          <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-9" bpmn:id="_JL6L8MPoEd6KT51CNOEWqw">
                        <bpel:links>
                          <bpel:targets></bpel:targets>
                        </bpel:links>
                      </bpel:empty>
                      <bpel:if>
                        <bpel:condition>$responseSent</bpel:condition>
                        <bpel:sequence>
                          <bpel:empty bpmn:label="End" name="End" bpmn:id="_dtSMgP-2EeW6FKe-JLFSzw"/>
                        </bpel:sequence>
                        <bpel:else>
                          <bpel:sequence>
                            <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="completeTaskResponse" bpmn:label="send  Complete Task&#13;&#10; response back to UI" name="send__Complete_Task___response_back_to_UI" bpmn:id="_yEJboKhZEdyXuZws7kaYiQ"></bpel:reply>
                          </bpel:sequence>
                        </bpel:else>
                      </bpel:if>
                    </bpel:sequence>
                    <bpel:elseif>
                      <bpel:condition>($GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "CLAIMED") and ($completeTaskRequest.root/b4p:user/text() != $GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:userOwner/text())</bpel:condition>
                      <bpel:sequence>
                        <bpel:assign bpmn:label="Send Error Reason" name="Send_Error_Reason-1" bpmn:id="_CHAekHATEeC_Q9O5YGuHjA">
                          <bpel:copy>
                            <bpel:from>concat("The task had been claimed by ", $GetTaskOwnerAndStateResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:userOwner/text())</bpel:from>
                            <bpel:to>$completeTaskResponse.root/b4p:errorReason</bpel:to>
                          </bpel:copy>
                          <bpel:copy>
                            <bpel:from>true()</bpel:from>
                            <bpel:to>$taskClaimed</bpel:to>
                          </bpel:copy>
                          <bpel:copy>
                            <bpel:from>"ERROR"</bpel:from>
                            <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                          </bpel:copy>
                        </bpel:assign>
                        <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-10" bpmn:id="_JL6L8MPoEd6KT51CNOEWqw">
                          <bpel:links>
                            <bpel:targets></bpel:targets>
                          </bpel:links>
                        </bpel:empty>
                        <bpel:if>
                          <bpel:condition>$responseSent</bpel:condition>
                          <bpel:sequence>
                            <bpel:empty bpmn:label="End" name="End-1" bpmn:id="_dtSMgP-2EeW6FKe-JLFSzw"/>
                          </bpel:sequence>
                          <bpel:else>
                            <bpel:sequence>
                              <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="completeTaskResponse" bpmn:label="send  Complete Task&#13;&#10; response back to UI" name="send__Complete_Task___response_back_to_UI-1" bpmn:id="_yEJboKhZEdyXuZws7kaYiQ"></bpel:reply>
                            </bpel:sequence>
                          </bpel:else>
                        </bpel:if>
                      </bpel:sequence>
                    </bpel:elseif>
                    <bpel:else>
                      <bpel:sequence>
                        <bpel:scope bpmn:label="Check for pending adhoc tasks" name="Check_for_pending_adhoc_tasks" bpmn:id="_3pT2oPfUEeWjSajsvnwYGw">
                          <bpel:variables>
                            <bpel:variable name="CompleteTaskResponse" messageType="b4p:completeTaskResponse"/>
                            <bpel:variable name="ReceiveParallelAdhocTaskCompleted" messageType="b4p:parallelAdhocTaskCompleted"/>
                            <bpel:variable name="GetAssociatedTasksRequest" messageType="tns:getAssociatedTasksRequest"/>
                            <bpel:variable name="GetAssociatedTasksResponse" messageType="tns:getAssociatedTasksResponse"/>
                            <bpel:variable name="NotifyParallelAdhocTaskCompleted" messageType="b4p:parallelAdhocTaskCompleted"/>
                            <bpel:variable name="ParallelAdhocTaskCompleteResponse" messageType="b4p:completeTaskResponse"/>
                            <bpel:variable name="completeTMSTaskResponse" messageType="tns:okResponse"/>
                            <bpel:variable name="completeTMSTaskRequest" messageType="tns:setOutputAndCompleteRequest"/>
                            <bpel:variable name="PrecedingTaskResponse" messageType="b4p:completeTaskResponse"/>
                            <bpel:variable name="GetStateOfAssociatedTaskRequest" messageType="tns:getTaskOwnerAndStateRequest"/>
                            <bpel:variable name="GetStateOfAssociatedTaskResponse" messageType="tns:getTaskOwnerAndStateResponse"/>
                            <bpel:variable name="SucceedingTaskResponse" messageType="b4p:completeTaskResponse"/>
                          </bpel:variables>
                          <bpel:while bpmn:label="Check for pending adhoc tasks" name="Check_for_pending_adhoc_tasks-1">
                            <bpel:condition>$hasPendingParallelTasks</bpel:condition>
                            <bpel:sequence>
                              <bpel:assign name="init-variables-Check_for_pending_adhoc_tasks" bpmn:id="_3pT2oPfUEeWjSajsvnwYGw">
                                <bpel:copy bpmn:label="$CompleteTaskResponse">
                                  <bpel:from>
                                    <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$CompleteTaskResponse.root</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$GetAssociatedTasksRequest">
                                  <bpel:from>
                                    <bpel:literal>
<tns:getAssociatedTasksRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
  <tns:taskState></tns:taskState>
</tns:getAssociatedTasksRequest></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$GetAssociatedTasksRequest.getAssociatedTasksRequest</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$NotifyParallelAdhocTaskCompleted">
                                  <bpel:from>
                                    <bpel:literal>
<b4p:parallelAdhocTaskCompleted>
  <b4p:associatedTaskID></b4p:associatedTaskID>
  <b4p:adhocTaskID></b4p:adhocTaskID>
</b4p:parallelAdhocTaskCompleted></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$NotifyParallelAdhocTaskCompleted.root</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$ParallelAdhocTaskCompleteResponse">
                                  <bpel:from>
                                    <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$ParallelAdhocTaskCompleteResponse.root</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$completeTMSTaskRequest">
                                  <bpel:from>
                                    <bpel:literal>
<tns:setOutputAndCompleteRequest>
  <tns:taskId></tns:taskId>
  <tns:data></tns:data>
  <tns:participantToken></tns:participantToken>
</tns:setOutputAndCompleteRequest></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$PrecedingTaskResponse">
                                  <bpel:from>
                                    <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$PrecedingTaskResponse.root</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$GetStateOfAssociatedTaskRequest">
                                  <bpel:from>
                                    <bpel:literal>
<tns:getTaskOwnerAndStateRequest>
  <tns:taskId></tns:taskId>
  <tns:participantToken></tns:participantToken>
</tns:getTaskOwnerAndStateRequest></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$GetStateOfAssociatedTaskRequest.getTaskOwnerAndStateRequest</bpel:to>
                                </bpel:copy>
                                <bpel:copy bpmn:label="$SucceedingTaskResponse">
                                  <bpel:from>
                                    <bpel:literal>
<b4p:response>
  <b4p:taskMetaData>
    <b4p:activityInfo></b4p:activityInfo>
    <b4p:taskRequestVarUBP></b4p:taskRequestVarUBP>
    <b4p:taskResponseVarUBP></b4p:taskResponseVarUBP>
    <b4p:taskId></b4p:taskId>
    <b4p:taskState></b4p:taskState>
    <b4p:taskType></b4p:taskType>
    <b4p:description></b4p:description>
    <b4p:processId></b4p:processId>
    <b4p:instanceId></b4p:instanceId>
    <b4p:creationDate></b4p:creationDate>
    <b4p:userOwner></b4p:userOwner>
    <b4p:roleOwner></b4p:roleOwner>
    <b4p:claimAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:claimAction>
    <b4p:revokeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:revokeAction>
    <b4p:saveAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:saveAction>
    <b4p:dismissAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:dismissAction>
    <b4p:completeAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:completeAction>
    <b4p:deferAction>
      <b4p:user></b4p:user>
      <b4p:role></b4p:role>
    </b4p:deferAction>
    <b4p:formUrl></b4p:formUrl>
    <b4p:failureCode></b4p:failureCode>
    <b4p:failureReason></b4p:failureReason>
    <b4p:priority></b4p:priority>
    <b4p:scheduledActions>
      <b4p:expiration>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:expiration>
      <b4p:deferActivation>
        <b4p:until></b4p:until>
        <b4p:for></b4p:for>
      </b4p:deferActivation>
    </b4p:scheduledActions>
    <b4p:userEndpoint></b4p:userEndpoint>
    <b4p:userProcessEndpoint></b4p:userProcessEndpoint>
    <b4p:userProcessNamespaceURI></b4p:userProcessNamespaceURI>
    <b4p:userProcessCompleteSOAPAction></b4p:userProcessCompleteSOAPAction>
    <b4p:isChainedBefore></b4p:isChainedBefore>
    <b4p:previousTaskId></b4p:previousTaskId>
    <b4p:nextTaskId></b4p:nextTaskId>
    <b4p:session></b4p:session>
    <b4p:nextTaskURL></b4p:nextTaskURL>
    <b4p:attachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:attachments>
    <b4p:globalAttachments>
      <attachment>
        <attachmentMetadata>
          <mimeType></mimeType>
          <fileName></fileName>
          <title></title>
          <description></description>
          <creationDate></creationDate>
        </attachmentMetadata>
        <payloadUrl></payloadUrl>
      </attachment>
    </b4p:globalAttachments>
    <b4p:isAdhocTask></b4p:isAdhocTask>
    <b4p:allowAdhocTask></b4p:allowAdhocTask>
    <b4p:adhocIndex></b4p:adhocIndex>
    <b4p:associatedTaskID></b4p:associatedTaskID>
    <b4p:adhocformType></b4p:adhocformType>
    <b4p:adhocPlacement></b4p:adhocPlacement>
    <b4p:adhocNote></b4p:adhocNote>
  </b4p:taskMetaData>
  <b4p:status></b4p:status>
  <b4p:errorCode></b4p:errorCode>
  <b4p:errorReason></b4p:errorReason>
  <b4p:isChainedAfter></b4p:isChainedAfter>
</b4p:response></bpel:literal>
                                  </bpel:from>
                                  <bpel:to>$SucceedingTaskResponse.root</bpel:to>
                                </bpel:copy>
                              </bpel:assign>
                              <bpel:assign bpmn:label="get associated tasks" name="get_associated_tasks" bpmn:id="_nMt2cPfWEeWjSajsvnwYGw">
                                <bpel:copy>
                                  <bpel:from>$taskId</bpel:from>
                                  <bpel:to>$GetAssociatedTasksRequest.getAssociatedTasksRequest/tns:taskId</bpel:to>
                                </bpel:copy>
                                <bpel:copy>
                                  <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                  <bpel:to>$GetAssociatedTasksRequest.getAssociatedTasksRequest/tns:participantToken</bpel:to>
                                </bpel:copy>
                                <bpel:copy>
                                  <bpel:from>"READY"</bpel:from>
                                  <bpel:to>$GetAssociatedTasksRequest.getAssociatedTasksRequest/tns:taskState</bpel:to>
                                </bpel:copy>
                              </bpel:assign>
                              <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getAssociatedTasks" inputVariable="GetAssociatedTasksRequest" outputVariable="GetAssociatedTasksResponse" bpmn:label="get associated tasks" name="get_associated_tasks-1" bpmn:id="_nMt2cPfWEeWjSajsvnwYGw"></bpel:invoke>
                              <bpel:flow bpmn:label="Parallel_Gateway" name="Parallel_Gateway-1" bpmn:id="_QGyhAPspEeWYbYkB2ueXDg">
                                <bpel:sequence>
                                  <bpel:assign bpmn:label="get parallel&#13;&#10;pending tasks" name="get_parallel__pending_tasks" bpmn:id="_qS8AgPfWEeWjSajsvnwYGw">
                                    <bpel:copy>
                                      <bpel:from>bpel:doXslTransform("getParallelAssociatedTasks.xsl", $GetAssociatedTasksResponse.getAssociatedTasksResponse)</bpel:from>
                                      <bpel:to>$pendingParallelTasks</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                </bpel:sequence>
                                <bpel:sequence>
                                  <bpel:assign bpmn:label="get preceding&#13;&#10;pending tasks" name="get_preceding__pending_tasks" bpmn:id="_UHTwIPspEeWYbYkB2ueXDg">
                                    <bpel:copy>
                                      <bpel:from>bpel:doXslTransform("getPrecedingAssociatedTasks.xsl", $GetAssociatedTasksResponse.getAssociatedTasksResponse)</bpel:from>
                                      <bpel:to>$pendingPrecedingTasks</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                </bpel:sequence>
                                <bpel:sequence>
                                  <bpel:assign bpmn:label="get succeeding &#13;&#10;pending tasks" name="get_succeeding___pending_tasks" bpmn:id="_2yeusPspEeWYbYkB2ueXDg">
                                    <bpel:copy>
                                      <bpel:from>bpel:doXslTransform("getSucceedingAssociatedTasks.xsl", $GetAssociatedTasksResponse.getAssociatedTasksResponse)</bpel:from>
                                      <bpel:to>$pendingSucceedingTasks</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                </bpel:sequence>
                              </bpel:flow>
                              <bpel:if>
                                <bpel:condition>count($pendingPrecedingTasks/b4p:task)&gt; 0</bpel:condition>
                                <bpel:sequence>
                                  <bpel:assign bpmn:label="send response" name="send_response" bpmn:id="_fKeZ0PuxEeWYbYkB2ueXDg">
                                    <bpel:copy>
                                      <bpel:from>"ERROR"</bpel:from>
                                      <bpel:to>$PrecedingTaskResponse.root/b4p:status</bpel:to>
                                    </bpel:copy>
                                    <bpel:copy>
                                      <bpel:from>"Associated preceding task is pending, so this task cannot be completed."</bpel:from>
                                      <bpel:to>$PrecedingTaskResponse.root/b4p:errorReason</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                  <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="PrecedingTaskResponse" bpmn:label="send response" name="send_response-1" bpmn:id="_fKeZ0PuxEeWYbYkB2ueXDg"></bpel:reply>
                                  <bpel:assign bpmn:label="Exit loop" name="Exit_loop" bpmn:id="_8VwTUPvUEeWYbYkB2ueXDg">
                                    <bpel:copy>
                                      <bpel:from>false()</bpel:from>
                                      <bpel:to>$hasPendingParallelTasks</bpel:to>
                                    </bpel:copy>
                                    <bpel:copy>
                                      <bpel:from>false()</bpel:from>
                                      <bpel:to>$proceedWithNotification</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                </bpel:sequence>
                                <bpel:else>
                                  <bpel:if>
                                    <bpel:condition>$adhocDataVar/b4p:adhocPlacement = "SUCCEEDING"</bpel:condition>
                                    <bpel:sequence>
                                      <bpel:assign bpmn:label="get state of associated task" name="get_state_of_associated_task" bpmn:id="_Q5K1UPyLEeWIXMFaRdNQag">
                                        <bpel:copy>
                                          <bpel:from>$adhocDataVar/b4p:associatedTaskID</bpel:from>
                                          <bpel:to>$GetStateOfAssociatedTaskRequest.getTaskOwnerAndStateRequest/tns:taskId</bpel:to>
                                        </bpel:copy>
                                        <bpel:copy>
                                          <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                          <bpel:to>$GetStateOfAssociatedTaskRequest.getTaskOwnerAndStateRequest/tns:participantToken</bpel:to>
                                        </bpel:copy>
                                      </bpel:assign>
                                      <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getTaskOwnerAndState" inputVariable="GetStateOfAssociatedTaskRequest" outputVariable="GetStateOfAssociatedTaskResponse" bpmn:label="get state of associated task" name="get_state_of_associated_task-1" bpmn:id="_Q5K1UPyLEeWIXMFaRdNQag"></bpel:invoke>
                                      <bpel:if>
                                        <bpel:condition>$GetStateOfAssociatedTaskResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "READY"</bpel:condition>
                                        <bpel:sequence>
                                          <bpel:assign bpmn:label="send response" name="send_response-2" bpmn:id="_Wz6nYPyJEeWYbYkB2ueXDg">
                                            <bpel:copy>
                                              <bpel:from>"ERROR"</bpel:from>
                                              <bpel:to>$SucceedingTaskResponse.root/b4p:status</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>"Associated preceding task is pending, so this task cannot be completed."</bpel:from>
                                              <bpel:to>$SucceedingTaskResponse.root/b4p:errorReason</bpel:to>
                                            </bpel:copy>
                                          </bpel:assign>
                                          <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="SucceedingTaskResponse" bpmn:label="send response" name="send_response-3" bpmn:id="_Wz6nYPyJEeWYbYkB2ueXDg"></bpel:reply>
                                          <bpel:assign bpmn:label="Exit loop" name="Exit_loop-1" bpmn:id="_0YQPAPyJEeWYbYkB2ueXDg">
                                            <bpel:copy>
                                              <bpel:from>false()</bpel:from>
                                              <bpel:to>$hasPendingParallelTasks</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>false()</bpel:from>
                                              <bpel:to>$proceedWithNotification</bpel:to>
                                            </bpel:copy>
                                          </bpel:assign>
                                        </bpel:sequence>
                                        <bpel:elseif>
                                          <bpel:condition>$GetStateOfAssociatedTaskResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "COMPLETED"</bpel:condition>
                                          <bpel:sequence>
                                            <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-11" bpmn:id="_ZMQnkPu0EeWYbYkB2ueXDg">
                                              <bpel:links>
                                                <bpel:targets></bpel:targets>
                                              </bpel:links>
                                            </bpel:empty>
                                            <bpel:assign bpmn:label="Invoke TMS to mark Task as completed" name="Invoke_TMS_to_mark_Task_as_completed" bpmn:id="_wSyCIKhNEdyQFMjeTyvJzg">
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:taskOutput</bpel:from>
                                                <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:data</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                                <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:participantToken</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                                <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:taskId</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                            <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="setOutputAndComplete" inputVariable="completeTMSTaskRequest" outputVariable="completeTMSTaskResponse" bpmn:label="Invoke TMS to mark Task as completed" name="Invoke_TMS_to_mark_Task_as_completed-1" bpmn:id="_wSyCIKhNEdyQFMjeTyvJzg"></bpel:invoke>
                                            <bpel:flow bpmn:label="Parallel_Gateway" name="Parallel_Gateway-2" bpmn:id="_8ApvYPu7EeWYbYkB2ueXDg">
                                              <bpel:sequence>
                                                <bpel:assign bpmn:label="getAttachements" name="getAttachements" bpmn:id="_6-GHIGmhEd2FXpqqOgbHYQ">
                                                  <bpel:copy>
                                                    <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                                    <bpel:to>$GetAttachmentsRequest.getAttachmentsRequest/tns:participantToken</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                                    <bpel:to>$GetAttachmentsRequest.getAttachmentsRequest/tns:taskId</bpel:to>
                                                  </bpel:copy>
                                                </bpel:assign>
                                                <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getAttachments" inputVariable="GetAttachmentsRequest" outputVariable="GetAttachmentsResponse" bpmn:label="getAttachements" name="getAttachements-1" bpmn:id="_6-GHIGmhEd2FXpqqOgbHYQ"></bpel:invoke>
                                              </bpel:sequence>
                                              <bpel:sequence>
                                                <bpel:assign bpmn:label="getGlobalAttachments" name="getGlobalAttachments" bpmn:id="_4BfUsOXOEeWG7YrGV-y1wQ">
                                                  <bpel:copy>
                                                    <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                                    <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest/tns:taskId</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                                    <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest/tns:participantToken</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>"true"</bpel:from>
                                                    <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest/tns:globalAttachment</bpel:to>
                                                  </bpel:copy>
                                                </bpel:assign>
                                                <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getAttachments" inputVariable="GetGlobalAttachmentsRequest" outputVariable="GetGlobalAttachmentsResponse" bpmn:label="getGlobalAttachments" name="getGlobalAttachments-1" bpmn:id="_4BfUsOXOEeWG7YrGV-y1wQ"></bpel:invoke>
                                              </bpel:sequence>
                                            </bpel:flow>
                                            <bpel:if>
                                              <bpel:condition>$adhocDataVar/b4p:isAdhocTask = "true"</bpel:condition>
                                              <bpel:sequence>
                                                <bpel:assign bpmn:label="perform&#13;&#10;XSL" name="perform__XSL" bpmn:id="_p94KsPrwEeWXrK7amFnysQ">
                                                  <bpel:copy>
                                                    <bpel:from>bpel:doXslTransform("getMainTask.xsl", $GetAssociatedTasksResponse.getAssociatedTasksResponse)</bpel:from>
                                                    <bpel:to>$tasks</bpel:to>
                                                  </bpel:copy>
                                                </bpel:assign>
                                                <bpel:if>
                                                  <bpel:condition>count($tasks/b4p:task)&gt; 0</bpel:condition>
                                                  <bpel:empty/>
                                                  <bpel:else>
                                                    <bpel:sequence>
                                                      <bpel:assign bpmn:label="notify main task" name="notify_main_task" bpmn:id="_FHryQPcPEeWqxKaG65t8rA">
                                                        <bpel:copy>
                                                          <bpel:from>$taskId</bpel:from>
                                                          <bpel:to>$NotifyParallelAdhocTaskCompleted.root/b4p:adhocTaskID</bpel:to>
                                                        </bpel:copy>
                                                        <bpel:copy>
                                                          <bpel:from>$adhocDataVar/b4p:associatedTaskID</bpel:from>
                                                          <bpel:to>$NotifyParallelAdhocTaskCompleted.root/b4p:associatedTaskID</bpel:to>
                                                        </bpel:copy>
                                                      </bpel:assign>
                                                      <bpel:invoke partnerLink="taskManagementProcessimplicitPartnerAndTaskManagementProcessForTMPPortPlkVar" portType="b4p:TMPPortType" operation="parallelAdhocTaskCompleted" inputVariable="NotifyParallelAdhocTaskCompleted" bpmn:label="notify main task" name="notify_main_task-1" bpmn:id="_FHryQPcPEeWqxKaG65t8rA"></bpel:invoke>
                                                    </bpel:sequence>
                                                  </bpel:else>
                                                </bpel:if>
                                                <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-12" bpmn:id="_Q9PFwPu2EeWYbYkB2ueXDg">
                                                  <bpel:links>
                                                    <bpel:targets></bpel:targets>
                                                  </bpel:links>
                                                </bpel:empty>
                                                <bpel:assign bpmn:label="send response" name="send_response-4" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA">
                                                  <bpel:copy>
                                                    <bpel:from>"OK"</bpel:from>
                                                    <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:status</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>false()</bpel:from>
                                                    <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:isChainedAfter</bpel:to>
                                                  </bpel:copy>
                                                </bpel:assign>
                                                <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="ParallelAdhocTaskCompleteResponse" bpmn:label="send response" name="send_response-5" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA"></bpel:reply>
                                                <bpel:assign bpmn:label="mark task&#13;&#10;as completed" name="mark_task__as_completed" bpmn:id="_szywkPcOEeWqxKaG65t8rA">
                                                  <bpel:copy>
                                                    <bpel:from>true()</bpel:from>
                                                    <bpel:to>$taskCompleted</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>false()</bpel:from>
                                                    <bpel:to>$hasPendingParallelTasks</bpel:to>
                                                  </bpel:copy>
                                                </bpel:assign>
                                              </bpel:sequence>
                                              <bpel:elseif>
                                                <bpel:condition>$adhocDataVar/b4p:adhocPlacement = "SUCCEEDING"</bpel:condition>
                                                <bpel:sequence>
                                                  <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-13" bpmn:id="_Q9PFwPu2EeWYbYkB2ueXDg">
                                                    <bpel:links>
                                                      <bpel:targets></bpel:targets>
                                                    </bpel:links>
                                                  </bpel:empty>
                                                  <bpel:assign bpmn:label="send response" name="send_response-6" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA">
                                                    <bpel:copy>
                                                      <bpel:from>"OK"</bpel:from>
                                                      <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:status</bpel:to>
                                                    </bpel:copy>
                                                    <bpel:copy>
                                                      <bpel:from>false()</bpel:from>
                                                      <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:isChainedAfter</bpel:to>
                                                    </bpel:copy>
                                                  </bpel:assign>
                                                  <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="ParallelAdhocTaskCompleteResponse" bpmn:label="send response" name="send_response-7" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA"></bpel:reply>
                                                  <bpel:assign bpmn:label="mark task&#13;&#10;as completed" name="mark_task__as_completed-1" bpmn:id="_szywkPcOEeWqxKaG65t8rA">
                                                    <bpel:copy>
                                                      <bpel:from>true()</bpel:from>
                                                      <bpel:to>$taskCompleted</bpel:to>
                                                    </bpel:copy>
                                                    <bpel:copy>
                                                      <bpel:from>false()</bpel:from>
                                                      <bpel:to>$hasPendingParallelTasks</bpel:to>
                                                    </bpel:copy>
                                                  </bpel:assign>
                                                </bpel:sequence>
                                              </bpel:elseif>
                                              <bpel:else>
                                                <bpel:sequence>
                                                  <bpel:if>
                                                    <bpel:condition>count($pendingParallelTasks/b4p:task)&gt; 0</bpel:condition>
                                                    <bpel:sequence>
                                                      <bpel:if>
                                                        <bpel:condition>$responseSent</bpel:condition>
                                                        <bpel:empty/>
                                                        <bpel:else>
                                                          <bpel:sequence>
                                                            <bpel:assign bpmn:label="send complete task response" name="send_complete_task_response" bpmn:id="_V2tbsPcMEeWqxKaG65t8rA">
                                                              <bpel:copy>
                                                                <bpel:from>true()</bpel:from>
                                                                <bpel:to>$responseSent</bpel:to>
                                                              </bpel:copy>
                                                              <bpel:copy>
                                                                <bpel:from>"OK"</bpel:from>
                                                                <bpel:to>$CompleteTaskResponse.root/b4p:status</bpel:to>
                                                              </bpel:copy>
                                                              <bpel:copy>
                                                                <bpel:from>false()</bpel:from>
                                                                <bpel:to>$CompleteTaskResponse.root/b4p:isChainedAfter</bpel:to>
                                                              </bpel:copy>
                                                            </bpel:assign>
                                                            <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="CompleteTaskResponse" bpmn:label="send complete task response" name="send_complete_task_response-1" bpmn:id="_V2tbsPcMEeWqxKaG65t8rA"></bpel:reply>
                                                          </bpel:sequence>
                                                        </bpel:else>
                                                      </bpel:if>
                                                      <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-14" bpmn:id="_hxYJ8_pZEeWSFoiaog61EQ">
                                                        <bpel:links>
                                                          <bpel:targets></bpel:targets>
                                                        </bpel:links>
                                                      </bpel:empty>
                                                      <bpel:receive partnerLink="taskManagementProcessimplicitPartnerAndTaskManagementProcessForTMPPortPlkVar" portType="b4p:TMPPortType" operation="parallelAdhocTaskCompleted" variable="ReceiveParallelAdhocTaskCompleted" bpmn:label="wait for parallel adhoc task to complete" name="wait_for_parallel_adhoc_task_to_complete" bpmn:id="_2f4YMPcKEeWqxKaG65t8rA">
                                                        <bpel:correlations>
                                                          <bpel:correlation set="task" initiate="join"/>
                                                        </bpel:correlations>
                                                      </bpel:receive>
                                                    </bpel:sequence>
                                                    <bpel:else>
                                                      <bpel:sequence>
                                                        <bpel:assign bpmn:label="Set loop var" name="Set_loop_var" bpmn:id="_s6tDEPo-EeWSFoiaog61EQ">
                                                          <bpel:copy>
                                                            <bpel:from>false()</bpel:from>
                                                            <bpel:to>$hasPendingParallelTasks</bpel:to>
                                                          </bpel:copy>
                                                        </bpel:assign>
                                                      </bpel:sequence>
                                                    </bpel:else>
                                                  </bpel:if>
                                                  <bpel:empty>
                                                    <bpel:links>
                                                      <bpel:sources>
                                                        <bpel:source linkName="_uTDbIPu0EeWYbYkB2ueXDg_to__w4eKEPfWEeWjSajsvnwYGw"/>
                                                      </bpel:sources>
                                                    </bpel:links>
                                                  </bpel:empty>
                                                </bpel:sequence>
                                              </bpel:else>
                                            </bpel:if>
                                          </bpel:sequence>
                                        </bpel:elseif>
                                        <bpel:elseif>
                                          <bpel:condition>not($GetStateOfAssociatedTaskResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "READY") and not($GetStateOfAssociatedTaskResponse.getTaskOwnerAndStateResponse/tns:task/tns:metadata/tns:taskState/text() = "COMPLETED")</bpel:condition>
                                          <bpel:throw faultName="bpmn:noGateChosen"/>
                                        </bpel:elseif>
                                      </bpel:if>
                                    </bpel:sequence>
                                    <bpel:else>
                                      <bpel:sequence>
                                        <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-15" bpmn:id="_ZMQnkPu0EeWYbYkB2ueXDg">
                                          <bpel:links>
                                            <bpel:targets></bpel:targets>
                                          </bpel:links>
                                        </bpel:empty>
                                        <bpel:assign bpmn:label="Invoke TMS to mark Task as completed" name="Invoke_TMS_to_mark_Task_as_completed-2" bpmn:id="_wSyCIKhNEdyQFMjeTyvJzg">
                                          <bpel:copy>
                                            <bpel:from>$completeTaskRequest.root/b4p:taskOutput</bpel:from>
                                            <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:data</bpel:to>
                                          </bpel:copy>
                                          <bpel:copy>
                                            <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                            <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:participantToken</bpel:to>
                                          </bpel:copy>
                                          <bpel:copy>
                                            <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                            <bpel:to>$completeTMSTaskRequest.setOutputAndCompleteRequest/tns:taskId</bpel:to>
                                          </bpel:copy>
                                        </bpel:assign>
                                        <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="setOutputAndComplete" inputVariable="completeTMSTaskRequest" outputVariable="completeTMSTaskResponse" bpmn:label="Invoke TMS to mark Task as completed" name="Invoke_TMS_to_mark_Task_as_completed-3" bpmn:id="_wSyCIKhNEdyQFMjeTyvJzg"></bpel:invoke>
                                        <bpel:flow bpmn:label="Parallel_Gateway" name="Parallel_Gateway-3" bpmn:id="_8ApvYPu7EeWYbYkB2ueXDg">
                                          <bpel:sequence>
                                            <bpel:assign bpmn:label="getAttachements" name="getAttachements-2" bpmn:id="_6-GHIGmhEd2FXpqqOgbHYQ">
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                                <bpel:to>$GetAttachmentsRequest.getAttachmentsRequest/tns:participantToken</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                                <bpel:to>$GetAttachmentsRequest.getAttachmentsRequest/tns:taskId</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                            <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getAttachments" inputVariable="GetAttachmentsRequest" outputVariable="GetAttachmentsResponse" bpmn:label="getAttachements" name="getAttachements-3" bpmn:id="_6-GHIGmhEd2FXpqqOgbHYQ"></bpel:invoke>
                                          </bpel:sequence>
                                          <bpel:sequence>
                                            <bpel:assign bpmn:label="getGlobalAttachments" name="getGlobalAttachments-2" bpmn:id="_4BfUsOXOEeWG7YrGV-y1wQ">
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                                <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest/tns:taskId</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                                <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest/tns:participantToken</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>"true"</bpel:from>
                                                <bpel:to>$GetGlobalAttachmentsRequest.getAttachmentsRequest/tns:globalAttachment</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                            <bpel:invoke partnerLink="taskManagementProcessAndTaskManagementSystemForPortTaskManagementServicesSOAPPlkVar" portType="tns:TaskManagementServicesPortType" operation="getAttachments" inputVariable="GetGlobalAttachmentsRequest" outputVariable="GetGlobalAttachmentsResponse" bpmn:label="getGlobalAttachments" name="getGlobalAttachments-3" bpmn:id="_4BfUsOXOEeWG7YrGV-y1wQ"></bpel:invoke>
                                          </bpel:sequence>
                                        </bpel:flow>
                                        <bpel:if>
                                          <bpel:condition>$adhocDataVar/b4p:isAdhocTask = "true"</bpel:condition>
                                          <bpel:sequence>
                                            <bpel:assign bpmn:label="perform&#13;&#10;XSL" name="perform__XSL-1" bpmn:id="_p94KsPrwEeWXrK7amFnysQ">
                                              <bpel:copy>
                                                <bpel:from>bpel:doXslTransform("getMainTask.xsl", $GetAssociatedTasksResponse.getAssociatedTasksResponse)</bpel:from>
                                                <bpel:to>$tasks</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                            <bpel:if>
                                              <bpel:condition>count($tasks/b4p:task)&gt; 0</bpel:condition>
                                              <bpel:empty/>
                                              <bpel:else>
                                                <bpel:sequence>
                                                  <bpel:assign bpmn:label="notify main task" name="notify_main_task-2" bpmn:id="_FHryQPcPEeWqxKaG65t8rA">
                                                    <bpel:copy>
                                                      <bpel:from>$taskId</bpel:from>
                                                      <bpel:to>$NotifyParallelAdhocTaskCompleted.root/b4p:adhocTaskID</bpel:to>
                                                    </bpel:copy>
                                                    <bpel:copy>
                                                      <bpel:from>$adhocDataVar/b4p:associatedTaskID</bpel:from>
                                                      <bpel:to>$NotifyParallelAdhocTaskCompleted.root/b4p:associatedTaskID</bpel:to>
                                                    </bpel:copy>
                                                  </bpel:assign>
                                                  <bpel:invoke partnerLink="taskManagementProcessimplicitPartnerAndTaskManagementProcessForTMPPortPlkVar" portType="b4p:TMPPortType" operation="parallelAdhocTaskCompleted" inputVariable="NotifyParallelAdhocTaskCompleted" bpmn:label="notify main task" name="notify_main_task-3" bpmn:id="_FHryQPcPEeWqxKaG65t8rA"></bpel:invoke>
                                                </bpel:sequence>
                                              </bpel:else>
                                            </bpel:if>
                                            <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-16" bpmn:id="_Q9PFwPu2EeWYbYkB2ueXDg">
                                              <bpel:links>
                                                <bpel:targets></bpel:targets>
                                              </bpel:links>
                                            </bpel:empty>
                                            <bpel:assign bpmn:label="send response" name="send_response-8" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA">
                                              <bpel:copy>
                                                <bpel:from>"OK"</bpel:from>
                                                <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:status</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>false()</bpel:from>
                                                <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:isChainedAfter</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                            <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="ParallelAdhocTaskCompleteResponse" bpmn:label="send response" name="send_response-9" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA"></bpel:reply>
                                            <bpel:assign bpmn:label="mark task&#13;&#10;as completed" name="mark_task__as_completed-2" bpmn:id="_szywkPcOEeWqxKaG65t8rA">
                                              <bpel:copy>
                                                <bpel:from>true()</bpel:from>
                                                <bpel:to>$taskCompleted</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>false()</bpel:from>
                                                <bpel:to>$hasPendingParallelTasks</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                          </bpel:sequence>
                                          <bpel:elseif>
                                            <bpel:condition>$adhocDataVar/b4p:adhocPlacement = "SUCCEEDING"</bpel:condition>
                                            <bpel:sequence>
                                              <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-17" bpmn:id="_Q9PFwPu2EeWYbYkB2ueXDg">
                                                <bpel:links>
                                                  <bpel:targets></bpel:targets>
                                                </bpel:links>
                                              </bpel:empty>
                                              <bpel:assign bpmn:label="send response" name="send_response-10" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA">
                                                <bpel:copy>
                                                  <bpel:from>"OK"</bpel:from>
                                                  <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:status</bpel:to>
                                                </bpel:copy>
                                                <bpel:copy>
                                                  <bpel:from>false()</bpel:from>
                                                  <bpel:to>$ParallelAdhocTaskCompleteResponse.root/b4p:isChainedAfter</bpel:to>
                                                </bpel:copy>
                                              </bpel:assign>
                                              <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="ParallelAdhocTaskCompleteResponse" bpmn:label="send response" name="send_response-11" bpmn:id="_ljd9kPcOEeWqxKaG65t8rA"></bpel:reply>
                                              <bpel:assign bpmn:label="mark task&#13;&#10;as completed" name="mark_task__as_completed-3" bpmn:id="_szywkPcOEeWqxKaG65t8rA">
                                                <bpel:copy>
                                                  <bpel:from>true()</bpel:from>
                                                  <bpel:to>$taskCompleted</bpel:to>
                                                </bpel:copy>
                                                <bpel:copy>
                                                  <bpel:from>false()</bpel:from>
                                                  <bpel:to>$hasPendingParallelTasks</bpel:to>
                                                </bpel:copy>
                                              </bpel:assign>
                                            </bpel:sequence>
                                          </bpel:elseif>
                                          <bpel:else>
                                            <bpel:sequence>
                                              <bpel:if>
                                                <bpel:condition>count($pendingParallelTasks/b4p:task)&gt; 0</bpel:condition>
                                                <bpel:sequence>
                                                  <bpel:if>
                                                    <bpel:condition>$responseSent</bpel:condition>
                                                    <bpel:empty/>
                                                    <bpel:else>
                                                      <bpel:sequence>
                                                        <bpel:assign bpmn:label="send complete task response" name="send_complete_task_response-2" bpmn:id="_V2tbsPcMEeWqxKaG65t8rA">
                                                          <bpel:copy>
                                                            <bpel:from>true()</bpel:from>
                                                            <bpel:to>$responseSent</bpel:to>
                                                          </bpel:copy>
                                                          <bpel:copy>
                                                            <bpel:from>"OK"</bpel:from>
                                                            <bpel:to>$CompleteTaskResponse.root/b4p:status</bpel:to>
                                                          </bpel:copy>
                                                          <bpel:copy>
                                                            <bpel:from>false()</bpel:from>
                                                            <bpel:to>$CompleteTaskResponse.root/b4p:isChainedAfter</bpel:to>
                                                          </bpel:copy>
                                                        </bpel:assign>
                                                        <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="CompleteTaskResponse" bpmn:label="send complete task response" name="send_complete_task_response-3" bpmn:id="_V2tbsPcMEeWqxKaG65t8rA"></bpel:reply>
                                                      </bpel:sequence>
                                                    </bpel:else>
                                                  </bpel:if>
                                                  <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-18" bpmn:id="_hxYJ8_pZEeWSFoiaog61EQ">
                                                    <bpel:links>
                                                      <bpel:targets></bpel:targets>
                                                    </bpel:links>
                                                  </bpel:empty>
                                                  <bpel:receive partnerLink="taskManagementProcessimplicitPartnerAndTaskManagementProcessForTMPPortPlkVar" portType="b4p:TMPPortType" operation="parallelAdhocTaskCompleted" variable="ReceiveParallelAdhocTaskCompleted" bpmn:label="wait for parallel adhoc task to complete" name="wait_for_parallel_adhoc_task_to_complete-1" bpmn:id="_2f4YMPcKEeWqxKaG65t8rA">
                                                    <bpel:correlations>
                                                      <bpel:correlation set="task" initiate="join"/>
                                                    </bpel:correlations>
                                                  </bpel:receive>
                                                </bpel:sequence>
                                                <bpel:else>
                                                  <bpel:sequence>
                                                    <bpel:assign bpmn:label="Set loop var" name="Set_loop_var-1" bpmn:id="_s6tDEPo-EeWSFoiaog61EQ">
                                                      <bpel:copy>
                                                        <bpel:from>false()</bpel:from>
                                                        <bpel:to>$hasPendingParallelTasks</bpel:to>
                                                      </bpel:copy>
                                                    </bpel:assign>
                                                  </bpel:sequence>
                                                </bpel:else>
                                              </bpel:if>
                                              <bpel:empty>
                                                <bpel:links>
                                                  <bpel:sources>
                                                    <bpel:source linkName="_uTDbIPu0EeWYbYkB2ueXDg_to__w4eKEPfWEeWjSajsvnwYGw"/>
                                                  </bpel:sources>
                                                </bpel:links>
                                              </bpel:empty>
                                            </bpel:sequence>
                                          </bpel:else>
                                        </bpel:if>
                                      </bpel:sequence>
                                    </bpel:else>
                                  </bpel:if>
                                </bpel:else>
                              </bpel:if>
                            </bpel:sequence>
                          </bpel:while>
                        </bpel:scope>
                        <bpel:if>
                          <bpel:condition>not($proceedWithNotification)</bpel:condition>
                          <bpel:sequence>
                            <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event-1" bpmn:id="_flTcMPvTEeWYbYkB2ueXDg"/>
                          </bpel:sequence>
                          <bpel:else>
                            <bpel:if>
                              <bpel:condition>$adhocDataVar/b4p:isAdhocTask = "true"</bpel:condition>
                              <bpel:sequence>
                                <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event-2" bpmn:id="_MoRuUPvPEeWYbYkB2ueXDg"/>
                              </bpel:sequence>
                              <bpel:else>
                                <bpel:sequence>
                                  <bpel:if>
                                    <bpel:condition>not(boolean(normalize-space($createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint)))</bpel:condition>
                                    <bpel:sequence>
                                      <bpel:assign bpmn:label="Prepare response&#13;&#10;to Service call" name="Prepare_response__to_Service_call" bpmn:id="_NJjGMMPoEd6KT51CNOEWqw">
                                        <bpel:copy>
                                          <bpel:from>"OK"</bpel:from>
                                          <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                                        </bpel:copy>
                                      </bpel:assign>
                                    </bpel:sequence>
                                    <bpel:else>
                                      <bpel:if>
                                        <bpel:condition>$isSingleActivit</bpel:condition>
                                        <bpel:sequence>
                                          <bpel:assign bpmn:label="notify Task&#13;&#10;Completion Single&#13;&#10;Activity" name="notify_Task__Completion_Single__Activity" bpmn:id="_Snpj8PY2EeW2GY9-FhCCxw">
                                            <bpel:copy>
                                              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:processId</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:session</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:session</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>"OK"</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:status</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:participantToken</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$completeTaskRequest.root/b4p:taskOutput</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskOutput</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$completeTaskRequest.root/b4p:user</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:user</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$CreateTaskSingleActivityResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:taskId</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$GetAttachmentsResponse.getAttachmentsResponse</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:attachments</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>$GetAttachmentsResponse.getAttachmentsResponse</bpel:from>
                                              <bpel:to>$notifyTaskCompletionSingleActivtyRequest.root/b4p:taskMetaData/b4p:globalAttachments</bpel:to>
                                            </bpel:copy>
                                          </bpel:assign>
                                          <bpel:invoke partnerLink="tMPAndUBPPlkVar" portType="UserBusinessProcess1:userProcessPortType" operation="notifyTaskCompletionSingleActivity" inputVariable="notifyTaskCompletionSingleActivtyRequest" bpmn:label="notify Task&#13;&#10;Completion Single&#13;&#10;Activity" name="notify_Task__Completion_Single__Activity-1" bpmn:id="_Snpj8PY2EeW2GY9-FhCCxw"></bpel:invoke>
                                          <bpel:assign bpmn:label="Prepare response&#13;&#10;to UIFW(Single&#13;&#10;Activity)" name="Prepare_response__to_UIFW_Single__Activity_" bpmn:id="_a9ueEPY2EeW2GY9-FhCCxw">
                                            <bpel:copy>
                                              <bpel:from>"OK"</bpel:from>
                                              <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                                            </bpel:copy>
                                            <bpel:copy>
                                              <bpel:from>false()</bpel:from>
                                              <bpel:to>$completeTaskResponse.root/b4p:isChainedAfter</bpel:to>
                                            </bpel:copy>
                                          </bpel:assign>
                                        </bpel:sequence>
                                        <bpel:else>
                                          <bpel:sequence>
                                            <bpel:assign bpmn:label="notify Task Completion Request" name="notify_Task_Completion_Request" bpmn:id="_JP7KQKhQEdyQFMjeTyvJzg">
                                              <bpel:copy>
                                                <bpel:from>$createTaskResponse.root/b4p:taskMetaData/b4p:taskId</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:taskId</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:processId</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:processId</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:taskOutput</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskOutput</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:userProcessEndpoint</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:userProcessNamespaceURI</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:userProcessCompleteSOAPAction</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$createTaskRequest.root/b4p:taskMetaData/b4p:session</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:session</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>"OK"</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:status</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
                                                <bpel:from>$completeTaskRequest.root/b4p:user</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:user</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$completeTaskRequest.root/b4p:participantToken</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:participantToken</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$GetAttachmentsResponse.getAttachmentsResponse</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:globalAttachments</bpel:to>
                                              </bpel:copy>
                                              <bpel:copy>
                                                <bpel:from>$GetAttachmentsResponse.getAttachmentsResponse</bpel:from>
                                                <bpel:to>$notifyTaskCompletionRequest.root/b4p:taskMetaData/b4p:attachments</bpel:to>
                                              </bpel:copy>
                                            </bpel:assign>
                                            <bpel:invoke partnerLink="tMPAndUBPPlkVar" portType="UserBusinessProcess1:userProcessPortType" operation="notifyTaskCompletion" inputVariable="notifyTaskCompletionRequest" outputVariable="notifyTaskCompletionResponse" bpmn:label="notify Task Completion Request" name="notify_Task_Completion_Request-1" bpmn:id="_JP7KQKhQEdyQFMjeTyvJzg"></bpel:invoke>
                                            <bpel:if>
                                              <bpel:condition>$notifyTaskCompletionResponse.root/b4p:isChainedAfter/text() = "true"</bpel:condition>
                                              <bpel:sequence>
                                                <bpel:receive partnerLink="taskManagementProcessAndNextTaskManagerForTMPPortPlkVar" portType="b4p:TMPPortType" operation="nextTaskReady" variable="NextTaskReady" bpmn:label="wait for next Task to be created" name="wait_for_next_Task_to_be_created" bpmn:id="_tth9iKhVEdyQFMjeTyvJzg">
                                                  <bpel:correlations>
                                                    <bpel:correlation set="task" initiate="no"/>
                                                  </bpel:correlations>
                                                </bpel:receive>
                                                <bpel:assign bpmn:label="Prepare Chained&#13;&#10; response to UIFW" name="Prepare_Chained___response_to_UIFW" bpmn:id="_R5Kh4KhZEdyXuZws7kaYiQ">
                                                  <bpel:copy>
                                                    <bpel:from>"OK"</bpel:from>
                                                    <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>$NextTaskReady.root/b4p:nextTaskId</bpel:from>
                                                    <bpel:to>$completeTaskResponse.root/b4p:taskMetaData/b4p:nextTaskId</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>$NextTaskReady.root/b4p:nextTaskURL</bpel:from>
                                                    <bpel:to>$completeTaskResponse.root/b4p:taskMetaData/b4p:nextTaskURL</bpel:to>
                                                  </bpel:copy>
                                                  <bpel:copy>
                                                    <bpel:from>true()</bpel:from>
                                                    <bpel:to>$completeTaskResponse.root/b4p:isChainedAfter</bpel:to>
                                                  </bpel:copy>
                                                </bpel:assign>
                                              </bpel:sequence>
                                              <bpel:else>
                                                <bpel:sequence>
                                                  <bpel:assign bpmn:label="Prepare response to UIFW" name="Prepare_response_to_UIFW" bpmn:id="_DamUoMPoEd6KT51CNOEWqw">
                                                    <bpel:copy>
                                                      <bpel:from>$notifyTaskCompletionResponse.root/b4p:status</bpel:from>
                                                      <bpel:to>$completeTaskResponse.root/b4p:status</bpel:to>
                                                    </bpel:copy>
                                                    <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
                                                      <bpel:from>$notifyTaskCompletionResponse.root/b4p:errorCode</bpel:from>
                                                      <bpel:to>$completeTaskResponse.root/b4p:errorCode</bpel:to>
                                                    </bpel:copy>
                                                    <bpel:copy ignoreUninitializedFromVariable="yes" ignoreMissingFromData="yes">
                                                      <bpel:from>$notifyTaskCompletionResponse.root/b4p:errorReason</bpel:from>
                                                      <bpel:to>$completeTaskResponse.root/b4p:errorReason</bpel:to>
                                                    </bpel:copy>
                                                    <bpel:copy>
                                                      <bpel:from>false()</bpel:from>
                                                      <bpel:to>$completeTaskResponse.root/b4p:isChainedAfter</bpel:to>
                                                    </bpel:copy>
                                                  </bpel:assign>
                                                </bpel:sequence>
                                              </bpel:else>
                                            </bpel:if>
                                            <bpel:empty>
                                              <bpel:links>
                                                <bpel:sources>
                                                  <bpel:source linkName="_O4BB4KhVEdyQFMjeTyvJzg_to__uyxHQKhVEdyQFMjeTyvJzg"/>
                                                </bpel:sources>
                                              </bpel:links>
                                            </bpel:empty>
                                          </bpel:sequence>
                                        </bpel:else>
                                      </bpel:if>
                                    </bpel:else>
                                  </bpel:if>
                                  <bpel:empty bpmn:label="Mark  Task&#13;&#10;as Completed" name="Mark__Task__as_Completed" bpmn:id="_VE5mUM1lEeCgyJYloHWTlQ">
                                    <bpel:links>
                                      <bpel:targets></bpel:targets>
                                    </bpel:links>
                                  </bpel:empty>
                                  <bpel:assign bpmn:label="Mark Task as Completed" name="Mark_Task_as_Completed" bpmn:id="_J9SFMKi9EeGNQZ2Xd2mMEg">
                                    <bpel:copy>
                                      <bpel:from>true()</bpel:from>
                                      <bpel:to>$taskCompleted</bpel:to>
                                    </bpel:copy>
                                  </bpel:assign>
                                  <bpel:empty bpmn:label="Exclusive_Data-Based_Gateway" name="Exclusive_Data-Based_Gateway-19" bpmn:id="_JL6L8MPoEd6KT51CNOEWqw">
                                    <bpel:links>
                                      <bpel:targets></bpel:targets>
                                    </bpel:links>
                                  </bpel:empty>
                                  <bpel:if>
                                    <bpel:condition>$responseSent</bpel:condition>
                                    <bpel:sequence>
                                      <bpel:empty bpmn:label="End" name="End-2" bpmn:id="_dtSMgP-2EeW6FKe-JLFSzw"/>
                                    </bpel:sequence>
                                    <bpel:else>
                                      <bpel:sequence>
                                        <bpel:reply partnerLink="taskManagementProcessAndUIFWForUIFWPortPlkVar" portType="b4p:UIFWPortType" operation="completeTask" variable="completeTaskResponse" bpmn:label="send  Complete Task&#13;&#10; response back to UI" name="send__Complete_Task___response_back_to_UI-2" bpmn:id="_yEJboKhZEdyXuZws7kaYiQ"></bpel:reply>
                                      </bpel:sequence>
                                    </bpel:else>
                                  </bpel:if>
                                </bpel:sequence>
                              </bpel:else>
                            </bpel:if>
                          </bpel:else>
                        </bpel:if>
                      </bpel:sequence>
                    </bpel:else>
                  </bpel:if>
                </bpel:sequence>
              </bpel:sequence>
            </bpel:onMessage>
          </bpel:pick>
        </bpel:sequence>
      </bpel:while>
    </bpel:scope>
  </bpel:sequence>
</bpel:process>